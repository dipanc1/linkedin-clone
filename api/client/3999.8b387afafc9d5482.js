(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3999],{3999:(h,l,g)=>{"use strict";g.r(l),g.d(l,{HomePageModule:()=>dn});var c={};g.r(c),g.d(c,{Decoder:()=>oe,Encoder:()=>vt,PacketType:()=>w,protocol:()=>Ze});var p={};g.r(p),g.d(p,{Manager:()=>K,Socket:()=>re,connect:()=>I,default:()=>I,io:()=>I,protocol:()=>Ze});var f=g(6895),a=g(933),x=g(9796),m=g(5585),_=g(8),s=g(2340),e=g(5176),u=g(1482),b=g(2092);const v=Object.create(null);v.open="0",v.close="1",v.ping="2",v.pong="3",v.message="4",v.upgrade="5",v.noop="6";const C=Object.create(null);Object.keys(v).forEach(o=>{C[v[o]]=o});const S={type:"error",data:"parser error"},O="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Le="function"==typeof ArrayBuffer,ue=(o,n)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];n("b"+(i||""))},t.readAsDataURL(o)},pe=({type:o,data:n},t,i)=>O&&n instanceof Blob?t?i(n):ue(n,i):Le&&(n instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer)(n))?t?i(n):ue(new Blob([n]),i):i(v[o]+(n||"")),q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<q.length;o++)D[q.charCodeAt(o)]=o;const Je="function"==typeof ArrayBuffer,He=(o,n)=>{if(Je){const t=(o=>{let i,d,y,T,k,n=.75*o.length,t=o.length,r=0;"="===o[o.length-1]&&(n--,"="===o[o.length-2]&&n--);const Z=new ArrayBuffer(n),N=new Uint8Array(Z);for(i=0;i<t;i+=4)d=D[o.charCodeAt(i)],y=D[o.charCodeAt(i+1)],T=D[o.charCodeAt(i+2)],k=D[o.charCodeAt(i+3)],N[r++]=d<<2|y>>4,N[r++]=(15&y)<<4|T>>2,N[r++]=(3&T)<<6|63&k;return Z})(o);return de(t,n)}return{base64:!0,data:o}},de=(o,n)=>"blob"===n&&o instanceof ArrayBuffer?new Blob([o]):o,fe=(o,n)=>{if("string"!=typeof o)return{type:"message",data:de(o,n)};const t=o.charAt(0);return"b"===t?{type:"message",data:He(o.substring(1),n)}:C[t]?o.length>1?{type:C[t],data:o.substring(1)}:{type:C[t]}:S},he=String.fromCharCode(30);function P(o){if(o)return function Ge(o){for(var n in P.prototype)o[n]=P.prototype[n];return o}(o)}P.prototype.on=P.prototype.addEventListener=function(o,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(n),this},P.prototype.once=function(o,n){function t(){this.off(o,t),n.apply(this,arguments)}return t.fn=n,this.on(o,t),this},P.prototype.off=P.prototype.removeListener=P.prototype.removeAllListeners=P.prototype.removeEventListener=function(o,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var t=this._callbacks["$"+o];if(!t)return this;if(1==arguments.length)return delete this._callbacks["$"+o],this;for(var i,r=0;r<t.length;r++)if((i=t[r])===n||i.fn===n){t.splice(r,1);break}return 0===t.length&&delete this._callbacks["$"+o],this},P.prototype.emitReserved=P.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),t=this._callbacks["$"+o],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(t){i=0;for(var r=(t=t.slice(0)).length;i<r;++i)t[i].apply(this,n)}return this},P.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]},P.prototype.hasListeners=function(o){return!!this.listeners(o).length};const A=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function ge(o,...n){return n.reduce((t,i)=>(o.hasOwnProperty(i)&&(t[i]=o[i]),t),{})}const Ve=A.setTimeout,We=A.clearTimeout;function Q(o,n){n.useNativeTimers?(o.setTimeoutFn=Ve.bind(A),o.clearTimeoutFn=We.bind(A)):(o.setTimeoutFn=A.setTimeout.bind(A),o.clearTimeoutFn=A.clearTimeout.bind(A))}function Xe(o){return"string"==typeof o?function et(o){let n=0,t=0;for(let i=0,r=o.length;i<r;i++)n=o.charCodeAt(i),n<128?t+=1:n<2048?t+=2:n<55296||n>=57344?t+=3:(i++,t+=4);return t}(o):Math.ceil(1.33*(o.byteLength||o.size))}class tt extends Error{constructor(n,t,i){super(n),this.description=t,this.context=i,this.type="TransportError"}}class xe extends P{constructor(n){super(),this.writable=!1,Q(this,n),this.opts=n,this.query=n.query,this.socket=n.socket}onError(n,t,i){return super.emitReserved("error",new tt(n,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(n){"open"===this.readyState&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const t=fe(n,this.socket.binaryType);this.onPacket(t)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}}const _e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ye={};let ve,be=0,B=0;function Ce(o){let n="";do{n=_e[o%64]+n,o=Math.floor(o/64)}while(o>0);return n}function we(){const o=Ce(+new Date);return o!==ve?(be=0,ve=o):o+"."+Ce(be++)}for(;B<64;B++)ye[_e[B]]=B;function Te(o){let n="";for(let t in o)o.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(o[t]));return n}let Pe=!1;try{Pe=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const it=Pe;function Se(o){const n=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||it))return new XMLHttpRequest}catch{}if(!n)try{return new(A[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function ot(){}const rt=null!=new Se({xdomain:!1}).responseType;let G=(()=>{class o extends P{constructor(t,i){super(),Q(this,i),this.opts=i,this.method=i.method||"GET",this.uri=t,this.async=!1!==i.async,this.data=void 0!==i.data?i.data:null,this.create()}create(){const t=ge(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const i=this.xhr=new Se(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{4===i.readyState&&(200===i.status||1223===i.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof i.status?i.status:0)},0))},i.send(this.data)}catch(r){return void this.setTimeoutFn(()=>{this.onError(r)},0)}typeof document<"u"&&(this.index=o.requestsCount++,o.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=ot,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete o.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return o.requestsCount=0,o.requests={},o})();function ke(){for(let o in G.requests)G.requests.hasOwnProperty(o)&&G.requests[o].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",ke):"function"==typeof addEventListener&&addEventListener("onpagehide"in A?"pagehide":"unload",ke,!1));const Oe="function"==typeof Promise&&"function"==typeof Promise.resolve?n=>Promise.resolve().then(n):(n,t)=>t(n,0),V=A.WebSocket||A.MozWebSocket,Ae=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),lt={websocket:class ct extends xe{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),t=this.opts.protocols,i=Ae?{}:ge(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Ae?new V(n,t,i):t?new V(n,t):new V(n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let t=0;t<n.length;t++){const r=t===n.length-1;pe(n[t],this.supportsBinary,d=>{try{this.ws.send(d)}catch{}r&&Oe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let n=this.query||{};const t=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(n[this.opts.timestampParam]=we()),this.supportsBinary||(n.b64=1);const r=Te(n);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!!V}},polling:class st extends xe{constructor(n){if(super(n),this.polling=!1,typeof location<"u"){const i="https:"===location.protocol;let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||r!==n.port,this.xs=n.secure!==i}this.supportsBinary=rt&&!(n&&n.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const t=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){((o,n)=>{const t=o.split(he),i=[];for(let r=0;r<t.length;r++){const d=fe(t[r],n);if(i.push(d),"error"===d.type)break}return i})(n,this.socket.binaryType).forEach(i=>{if("opening"===this.readyState&&"open"===i.type&&this.onOpen(),"close"===i.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};"open"===this.readyState?n():this.once("open",n)}write(n){this.writable=!1,((o,n)=>{const t=o.length,i=new Array(t);let r=0;o.forEach((d,y)=>{pe(d,!1,T=>{i[y]=T,++r===t&&n(i.join(he))})})})(n,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let n=this.query||{};const t=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(n[this.opts.timestampParam]=we()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const r=Te(n);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}request(n={}){return Object.assign(n,{xd:this.xd,xs:this.xs},this.opts),new G(this.uri(),n)}doWrite(n,t){const i=this.request({method:"POST",data:n});i.on("success",t),i.on("error",(r,d)=>{this.onError("xhr post error",r,d)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=n}}},ut=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,pt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ee(o){const n=o,t=o.indexOf("["),i=o.indexOf("]");-1!=t&&-1!=i&&(o=o.substring(0,t)+o.substring(t,i).replace(/:/g,";")+o.substring(i,o.length));let r=ut.exec(o||""),d={},y=14;for(;y--;)d[pt[y]]=r[y]||"";return-1!=t&&-1!=i&&(d.source=n,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=function dt(o,n){const i=n.replace(/\/{2,9}/g,"/").split("/");return("/"==n.slice(0,1)||0===n.length)&&i.splice(0,1),"/"==n.slice(-1)&&i.splice(i.length-1,1),i}(0,d.path),d.queryKey=function ft(o,n){const t={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,d){r&&(t[r]=d)}),t}(0,d.query),d}let Me=(()=>{class o extends P{constructor(t,i={}){super(),this.writeBuffer=[],t&&"object"==typeof t&&(i=t,t=null),t?(t=ee(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=ee(i.host).host),Q(this,i),this.secure=null!=i.secure?i.secure:typeof location<"u"&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function nt(o){let n={},t=o.split("&");for(let i=0,r=t.length;i<r;i++){let d=t[i].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=4,i.transport=t,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new lt[t](r)}open(){let t;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch{return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(t){let i=this.createTransport(t),r=!1;o.priorWebsocketSuccess=!1;const d=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",L=>{if(!r)if("pong"===L.type&&"probe"===L.data){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;o.priorWebsocketSuccess="websocket"===i.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(le(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const H=new Error("probe error");H.transport=i.name,this.emitReserved("upgradeError",H)}}))};function y(){r||(r=!0,le(),i.close(),i=null)}const T=L=>{const H=new Error("probe error: "+L);H.transport=i.name,y(),this.emitReserved("upgradeError",H)};function k(){T("transport closed")}function Z(){T("socket closed")}function N(L){i&&L.name!==i.name&&y()}const le=()=>{i.removeListener("open",d),i.removeListener("error",T),i.removeListener("close",k),this.off("close",Z),this.off("upgrading",N)};i.once("open",d),i.once("error",T),i.once("close",k),this.once("close",Z),this.once("upgrading",N),i.open()}onOpen(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const i=this.upgrades.length;for(;t<i;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const d=this.writeBuffer[r].data;if(d&&(i+=Xe(d)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(t,i,r){return this.sendPacket("message",t,i,r),this}send(t,i,r){return this.sendPacket("message",t,i,r),this}sendPacket(t,i,r,d){if("function"==typeof i&&(d=i,i=void 0),"function"==typeof r&&(d=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const y={type:t,data:i,options:r};this.emitReserved("packetCreate",y),this.writeBuffer.push(y),d&&this.once("flush",d),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){o.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,i){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const i=[];let r=0;const d=t.length;for(;r<d;r++)~this.transports.indexOf(t[r])&&i.push(t[r]);return i}}return o.protocol=4,o})();const mt="function"==typeof ArrayBuffer,Ee=Object.prototype.toString,xt="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Ee.call(Blob),_t="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===Ee.call(File);function te(o){return mt&&(o instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer)(o))||xt&&o instanceof Blob||_t&&o instanceof File}function W(o,n){if(!o||"object"!=typeof o)return!1;if(Array.isArray(o)){for(let t=0,i=o.length;t<i;t++)if(W(o[t]))return!0;return!1}if(te(o))return!0;if(o.toJSON&&"function"==typeof o.toJSON&&1===arguments.length)return W(o.toJSON(),!0);for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)&&W(o[t]))return!0;return!1}function yt(o){const n=[],i=o;return i.data=ne(o.data,n),i.attachments=n.length,{packet:i,buffers:n}}function ne(o,n){if(!o)return o;if(te(o)){const t={_placeholder:!0,num:n.length};return n.push(o),t}if(Array.isArray(o)){const t=new Array(o.length);for(let i=0;i<o.length;i++)t[i]=ne(o[i],n);return t}if("object"==typeof o&&!(o instanceof Date)){const t={};for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=ne(o[i],n));return t}return o}function bt(o,n){return o.data=ie(o.data,n),delete o.attachments,o}function ie(o,n){if(!o)return o;if(o&&!0===o._placeholder){if("number"==typeof o.num&&o.num>=0&&o.num<n.length)return n[o.num];throw new Error("illegal attachments")}if(Array.isArray(o))for(let t=0;t<o.length;t++)o[t]=ie(o[t],n);else if("object"==typeof o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(o[t]=ie(o[t],n));return o}const Ze=5;var w=(()=>{return(o=w||(w={}))[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK",w;var o})();class vt{constructor(n){this.replacer=n}encode(n){return n.type!==w.EVENT&&n.type!==w.ACK||!W(n)?[this.encodeAsString(n)]:this.encodeAsBinary({type:n.type===w.EVENT?w.BINARY_EVENT:w.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id})}encodeAsString(n){let t=""+n.type;return(n.type===w.BINARY_EVENT||n.type===w.BINARY_ACK)&&(t+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(t+=n.nsp+","),null!=n.id&&(t+=n.id),null!=n.data&&(t+=JSON.stringify(n.data,this.replacer)),t}encodeAsBinary(n){const t=yt(n),i=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(i),r}}class oe extends P{constructor(n){super(),this.reviver=n}add(n){let t;if("string"==typeof n){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(n);const i=t.type===w.BINARY_EVENT;i||t.type===w.BINARY_ACK?(t.type=i?w.EVENT:w.ACK,this.reconstructor=new Ct(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!te(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(n),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(n){let t=0;const i={type:Number(n.charAt(0))};if(void 0===w[i.type])throw new Error("unknown packet type "+i.type);if(i.type===w.BINARY_EVENT||i.type===w.BINARY_ACK){const d=t+1;for(;"-"!==n.charAt(++t)&&t!=n.length;);const y=n.substring(d,t);if(y!=Number(y)||"-"!==n.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(y)}if("/"===n.charAt(t+1)){const d=t+1;for(;++t&&","!==n.charAt(t)&&t!==n.length;);i.nsp=n.substring(d,t)}else i.nsp="/";const r=n.charAt(t+1);if(""!==r&&Number(r)==r){const d=t+1;for(;++t;){const y=n.charAt(t);if(null==y||Number(y)!=y){--t;break}if(t===n.length)break}i.id=Number(n.substring(d,t+1))}if(n.charAt(++t)){const d=this.tryParse(n.substr(t));if(!oe.isPayloadValid(i.type,d))throw new Error("invalid payload");i.data=d}return i}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,t){switch(n){case w.CONNECT:return"object"==typeof t;case w.DISCONNECT:return void 0===t;case w.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case w.EVENT:case w.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case w.ACK:case w.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ct{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const t=bt(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function M(o,n,t){return o.on(n,t),function(){o.off(n,t)}}const wt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class re extends P{constructor(n,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[M(n,"open",this.onopen.bind(this)),M(n,"packet",this.onpacket.bind(this)),M(n,"error",this.onerror.bind(this)),M(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...t){if(wt.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(t.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:w.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const y=this.ids++,T=t.pop();this._registerAckCallback(y,T),i.id=y}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(n,t){var i;const r=null!==(i=this.flags.timeout)&&void 0!==i?i:this._opts.ackTimeout;if(void 0===r)return void(this.acks[n]=t);const d=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let y=0;y<this.sendBuffer.length;y++)this.sendBuffer[y].id===n&&this.sendBuffer.splice(y,1);t.call(this,new Error("operation has timed out"))},r);this.acks[n]=(...y)=>{this.io.clearTimeoutFn(d),t.apply(this,[null,...y])}}emitWithAck(n,...t){const i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((r,d)=>{t.push((y,T)=>i?y?d(y):r(T):r(y)),this.emit(n,...t)})}_addToQueue(n){let t;"function"==typeof n[n.length-1]&&(t=n.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((r,...d)=>i!==this._queue[0]?void 0:(null!==r?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...d)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!n||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){"function"==typeof this.auth?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:w.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,t)}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case w.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case w.EVENT:case w.BINARY_EVENT:this.onevent(n);break;case w.ACK:case w.BINARY_ACK:this.onack(n);break;case w.DISCONNECT:this.ondisconnect();break;case w.CONNECT_ERROR:this.destroy();const i=new Error(n.data.message);i.data=n.data.data,this.emitReserved("connect_error",i)}}onevent(n){const t=n.data||[];null!=n.id&&t.push(this.ack(n.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&"string"==typeof n[n.length-1]&&(this._lastOffset=n[n.length-1])}ack(n){const t=this;let i=!1;return function(...r){i||(i=!0,t.packet({type:w.ACK,id:n,data:r}))}}onack(n){const t=this.acks[n.id];"function"==typeof t&&(t.apply(this,n.data),delete this.acks[n.id])}onconnect(n,t){this.id=n,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:w.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(n===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(n===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,n.data)}}}function R(o){this.ms=(o=o||{}).min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}R.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),t=Math.floor(n*this.jitter*o);o=0==(1&Math.floor(10*n))?o-t:o+t}return 0|Math.min(o,this.max)},R.prototype.reset=function(){this.attempts=0},R.prototype.setMin=function(o){this.ms=o},R.prototype.setMax=function(o){this.max=o},R.prototype.setJitter=function(o){this.jitter=o};class K extends P{constructor(n,t){var i;super(),this.nsps={},this.subs=[],n&&"object"==typeof n&&(t=n,n=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Q(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=t.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new R({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout??2e4),this._readyState="closed",this.uri=n;const r=t.parser||c;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return void 0===n?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var t;return void 0===n?this._reconnectionDelay:(this._reconnectionDelay=n,null===(t=this.backoff)||void 0===t||t.setMin(n),this)}randomizationFactor(n){var t;return void 0===n?this._randomizationFactor:(this._randomizationFactor=n,null===(t=this.backoff)||void 0===t||t.setJitter(n),this)}reconnectionDelayMax(n){var t;return void 0===n?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,null===(t=this.backoff)||void 0===t||t.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new Me(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=M(t,"open",function(){i.onopen(),n&&n()}),d=M(t,"error",y=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",y),n?n(y):i.maybeReconnectOnOpen()});if(!1!==this._timeout){const y=this._timeout;0===y&&r();const T=this.setTimeoutFn(()=>{r(),t.close(),t.emit("error",new Error("timeout"))},y);this.opts.autoUnref&&T.unref(),this.subs.push(function(){clearTimeout(T)})}return this.subs.push(r),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(M(n,"ping",this.onping.bind(this)),M(n,"data",this.ondata.bind(this)),M(n,"error",this.onerror.bind(this)),M(n,"close",this.onclose.bind(this)),M(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(t){this.onclose("parse error",t)}}ondecoded(n){Oe(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,t){let i=this.nsps[n];return i?this._autoConnect&&!i.active&&i.connect():(i=new re(this,n,t),this.nsps[n]=i),i}_destroy(n){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(n){const t=this.encoder.encode(n);for(let i=0;i<t.length;i++)this.engine.write(t[i],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(r=>{r?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",r)):n.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const z={};function I(o,n){"object"==typeof o&&(n=o,o=void 0);const t=function ht(o,n="",t){let i=o;t=t||typeof location<"u"&&location,null==o&&(o=t.protocol+"//"+t.host),"string"==typeof o&&("/"===o.charAt(0)&&(o="/"===o.charAt(1)?t.protocol+o:t.host+o),/^(https?|wss?):\/\//.test(o)||(o=typeof t<"u"?t.protocol+"//"+o:"https://"+o),i=ee(o)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const d=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+d+":"+i.port+n,i.href=i.protocol+"://"+d+(t&&t.port===i.port?"":":"+i.port),i}(o,(n=n||{}).path||"/socket.io"),i=t.source,r=t.id;let k;return n.forceNew||n["force new connection"]||!1===n.multiplex||z[r]&&t.path in z[r].nsps?k=new K(i,n):(z[r]||(z[r]=new K(i,n)),k=z[r]),t.query&&!n.query&&(n.query=t.queryKey),k.socket(t.path,n)}Object.assign(I,{Manager:K,Socket:re,io:I,connect:I});new e.OlP("__SOCKET_IO_CONFIG__");const Tt={url:s.N.socketUrl,options:{transportOptions:{polling:{extraHeaders:{authorization:localStorage.getItem("CapacitorStorage.token")}}}}};let Pt=(()=>{class o extends class Be{constructor(n){this.config=n,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===n&&(n=this.emptyConfig),this.ioSocket=(I||p)(n.url,n.options)}of(n){this.ioSocket.of(n)}on(n,t){this.ioSocket.on(n,t)}once(n,t){this.ioSocket.once(n,t)}connect(){return this.ioSocket.connect()}disconnect(n){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(n,...t){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(n,t){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(n){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(n){return this.subscribersCounter[n]||(this.subscribersCounter[n]=0),this.subscribersCounter[n]++,this.eventObservables$[n]||(this.eventObservables$[n]=new u.y(t=>{const i=r=>{t.next(r)};return this.ioSocket.on(n,i),()=>{this.subscribersCounter[n]--,0===this.subscribersCounter[n]&&(this.ioSocket.removeListener(n,i),delete this.eventObservables$[n])}}).pipe((0,b.B)())),this.eventObservables$[n]}fromOneTimeEvent(n){return new Promise(t=>this.once(n,t))}}{constructor(){super(Tt)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var j=g(529);let St=(()=>{class o{constructor(t,i){this.socket=t,this.http=i}sendMessage(t,i){this.socket.emit("sendMessage",{message:t,conversation:i})}getNewMessage(){return this.socket.fromEvent("newMessage")}getFriends(){return this.http.get(`${s.N.baseApiUrl}/user/friends/my`)}createConversation(t){this.socket.emit("createConversation",t)}joinConversation(t){this.socket.emit("joinConversation",t)}leaveConversation(){this.socket.emit("leaveConversation")}getConversationMessages(){return this.socket.fromEvent("messages")}getConversations(){return this.socket.fromEvent("conversations")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Pt),e.LFG(j.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=g(9298);const kt=["form"];function Ot(o,n){if(1&o&&e._UZ(0,"ion-img",32),2&o){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("src",i.url+"/feed/image/"+t.imagePath)}}function At(o,n){if(1&o&&e._UZ(0,"ion-img",32),2&o){const t=e.oxw(2);e.Q6J("src",t.url+"/feed/image/blank-profile-picture.png")}}const Mt=function(o){return{"selected-conversation":o}};function Et(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",27),e.NdJ("click",function(){const r=e.CHM(t),d=r.$implicit,y=r.index,T=e.oxw();return e.KtG(T.openConversation(d,y))}),e.TgZ(1,"ion-grid")(2,"ion-row",28)(3,"ion-col",29)(4,"ion-avatar"),e.YNc(5,Ot,1,1,"ion-img",30),e.YNc(6,At,1,1,"ng-template",null,31,e.W1O),e.qZA()(),e.TgZ(8,"ion-col")(9,"ion-card-title"),e._uU(10),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12," Jatt Sohna Munda "),e.qZA()()()()()}if(2&o){const t=n.$implicit,i=n.index,r=e.MAs(7),d=e.oxw();e.Q6J("ngClass",e.VKq(5,Mt,d.selectedConversationIndex===i)),e.xp6(5),e.Q6J("ngIf",t.imagePath)("ngIfElse",r),e.xp6(5),e.AsE(" ",t.firstName," ",t.lastName," ")}}function Zt(o,n){if(1&o&&(e.TgZ(0,"ion-row",28)(1,"ion-col",29)(2,"ion-avatar"),e._UZ(3,"ion-img",32),e.qZA()(),e.TgZ(4,"ion-col")(5,"p")(6,"span",33),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"p"),e._uU(10),e.qZA()()()),2&o){const t=n.$implicit,i=e.oxw();e.xp6(3),e.Q6J("src",i.deriveFullImagePath(t.user)),e.xp6(4),e.lnq("",t.user.firstName," ",t.user.lastName," - ",e.xi3(8,5,t.createdAt,"short")," "),e.xp6(3),e.Oqu(t.message)}}let Bt=(()=>{class o{constructor(t,i){this.chatService=t,this.authService=i,this.conversations=[],this.messages=[],this.friends=[],this.friend$=new _.X({}),this.selectedConversationIndex=0,this.url=s.N.baseApiUrl}ionViewDidEnter(){this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t}),this.userIdSubscription=this.authService.userId.subscribe(t=>{this.userId=t}),this.conversationSubscription=this.chatService.getConversations().subscribe(t=>{this.conversations.push(t[0])}),this.messageSubscription=this.chatService.getConversationMessages().subscribe(t=>{t.forEach(i=>{this.messages.map(d=>d.id).includes(i.id)||this.messages.push(i)})}),this.newMessagesSubscription=this.chatService.getNewMessage().subscribe(t=>{t.createdAt=new Date,this.messages.map(r=>r.id).includes(t.id)||this.messages.push(t)}),this.friendSubscription=this.friend$.subscribe(t=>{"{}"!==JSON.stringify(t)&&this.chatService.joinConversation(this.friend.id)}),this.friendsSubscription=this.chatService.getFriends().subscribe(t=>{this.friends=t,t.length>0&&(this.friend=this.friends[0],this.friend$.next(this.friend),t.forEach(i=>{this.chatService.createConversation(i)}),this.chatService.joinConversation(this.friend.id))})}openConversation(t,i){this.selectedConversationIndex=i,this.chatService.leaveConversation(),this.friend=t,this.friend$.next(this.friend),this.messages=[]}onSubmit(){const{message:t}=this.form.value;if(!t)return;const i=[this.userId,this.friend.id].sort();this.conversations.forEach(r=>{const d=r.users.map(y=>y.id).sort();JSON.stringify(i)===JSON.stringify(d)&&(this.conversation=r)}),this.chatService.sendMessage(t,this.conversation),this.form.reset()}deriveFullImagePath(t){const i=`${s.N.baseApiUrl}/feed/image/`;return t.id===this.userId?this.userFullImagePath:t.imagePath?i+t.imagePath:this.friend.imagePath?i+this.friend.imagePath:i+"blank-profile-picture.png"}ionViewDidLeave(){this.chatService.leaveConversation(),this.userImagePathSubscription.unsubscribe(),this.friendsSubscription.unsubscribe(),this.messageSubscription.unsubscribe(),this.userIdSubscription.unsubscribe(),this.conversationSubscription.unsubscribe(),this.newMessagesSubscription.unsubscribe(),this.friendSubscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(St),e.Y36(U.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-chat"]],viewQuery:function(t,i){if(1&t&&e.Gf(kt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.form=r.first)}},decls:48,vars:6,consts:[[1,"container"],[1,"select-connection"],[1,"top-panel"],[1,"heading"],["color","dark"],["shape","round","color","dark","fill","clear",2,"margin-right","-30px"],["name","ellipsis-horizontal-outline"],["shape","round","color","dark","fill","clear"],["name","create-outline"],["class","friend","class","friend",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"chat"],[1,"friend-name-role"],["color","dark",2,"font-weight","500"],["name","videocam"],[1,"chat-messages"],["class","ion-align-items-center ion-justify-content-center",4,"ngFor","ngForOf"],[3,"ngSubmit"],["form","ngForm"],["placeholder","Write a message...","ngModel","","type","text","name","message","required",""],[1,"ion-align-items-center","ion-justify-content-between"],["shape","round","color","dark","fill","clear",2,"margin-right","-20px"],["name","image-outline"],["name","document-outline"],["name","film-outline"],["name","happy-outline"],["type","submit","shape","round","expand","block",2,"width","55px",3,"disabled"],["type","submit","shape","round","expand","block",3,"disabled"],[1,"friend",3,"ngClass","click"],[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],[3,"src",4,"ngIf","ngIfElse"],["blankProfilePicture",""],[3,"src"],[2,"font-weight","500"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ion-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ion-text",4),e._uU(5,"Messaging"),e.qZA()(),e.TgZ(6,"div")(7,"ion-button",5),e._UZ(8,"ion-icon",6),e.qZA(),e.TgZ(9,"ion-button",7),e._UZ(10,"ion-icon",8),e.qZA()()(),e.YNc(11,Et,13,7,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"div",2)(14,"div",11)(15,"ion-text",12),e._uU(16),e.qZA(),e.TgZ(17,"ion-text",4),e._uU(18,"Jatt Stack Developer"),e.qZA()(),e.TgZ(19,"div")(20,"ion-button",5),e._UZ(21,"ion-icon",6),e.qZA(),e.TgZ(22,"ion-button",7),e._UZ(23,"ion-icon",13),e.qZA()()(),e.TgZ(24,"ion-grid",14),e.YNc(25,Zt,11,8,"ion-row",15),e.qZA(),e.TgZ(26,"form",16,17),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(28,"ion-item"),e._UZ(29,"ion-textarea",18),e.qZA(),e.TgZ(30,"ion-grid")(31,"ion-row",19)(32,"span")(33,"ion-button",20),e._UZ(34,"ion-icon",21),e.qZA(),e.TgZ(35,"ion-button",20),e._UZ(36,"ion-icon",22),e.qZA(),e.TgZ(37,"ion-button",20),e._UZ(38,"ion-icon",23),e.qZA(),e.TgZ(39,"ion-button",20),e._UZ(40,"ion-icon",24),e.qZA()(),e.TgZ(41,"span")(42,"ion-button",25),e._uU(43," send "),e.qZA(),e.TgZ(44,"ion-button",20),e._UZ(45,"ion-icon",6),e.qZA()()()(),e.TgZ(46,"ion-button",26),e._uU(47," send message "),e.qZA()()()()),2&t){const r=e.MAs(27);e.xp6(11),e.Q6J("ngForOf",i.friends),e.xp6(5),e.AsE("",(null==i.friend?null:i.friend.firstName)||"Loading..."," ",null==i.friend?null:i.friend.lastName,""),e.xp6(9),e.Q6J("ngForOf",i.messages),e.xp6(17),e.Q6J("disabled",!r.valid),e.xp6(4),e.Q6J("disabled",!r.valid)}},dependencies:[f.mk,f.sg,f.O5,x._Y,x.JJ,x.JL,x.Q7,x.On,x.F,a.BJ,a.YG,a.PM,a.tO,a.Dq,a.wI,a.jY,a.gu,a.Xz,a.Ie,a.Nd,a.yW,a.g2,a.j9,f.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;height:calc(100% - 110px);width:800px;box-shadow:none;border:1px solid #e1e1e1;margin:110px auto auto}@media (max-width: 800px){.container[_ngcontent-%COMP%]{width:100%}}.container[_ngcontent-%COMP%]   .select-connection[_ngcontent-%COMP%]{overflow-y:scroll;width:40%;border-right:1px solid #e1e1e1}.container[_ngcontent-%COMP%]   .select-connection[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;border-left:4px solid transparent}.container[_ngcontent-%COMP%]   .select-connection[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]:hover{background-color:#e1e1e1;cursor:pointer}.container[_ngcontent-%COMP%]   .select-connection[_ngcontent-%COMP%]   .selected-conversation[_ngcontent-%COMP%]{border-left:4px solid green}.container[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{width:60%;position:relative}.container[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{overflow-y:scroll;height:calc(100% - 260px);border-bottom:1px solid #e1e1e1}.container[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;height:200px;position:absolute;bottom:0}.container[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{height:110px}.top-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e1e1e1}.top-panel[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{padding:16px;font-size:18px;font-weight:500}.top-panel[_ngcontent-%COMP%]   .friend-name-role[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column}"]}),o})();var J=g(2518),Y=g(7828),E=g(3490),It=g(9891);let Ie=(()=>{class o{constructor(){this.bannerColors={colorOne:"#a0b4b7",colorTwo:"#dbe7e9",colorThree:"#bfd3d6"}}getBannerColors(t){switch(t){case"admin":return{colorOne:"#daa520",colorTwo:"#f0e68c",colorThree:"#fafad2"};case"premium":return{colorOne:"#bc8f8f",colorTwo:"#c09999",colorThree:"#ddadaf"};case"user":return{colorOne:"#a0b4b7",colorTwo:"#dbe7e9",colorThree:"#bfd3d6"};default:return this.bannerColors}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),se=(()=>{class o{constructor(t){this.http=t,this.httpOptions={headers:new j.WM({"Content-Type":"application/json"})}}getConnectionUser(t){return this.http.get(`${s.N.baseApiUrl}/user/${t}`)}getFriendRequestStatus(t){return this.http.get(`${s.N.baseApiUrl}/user/friend-request/status/${t}`)}addConnectionUser(t){return this.http.post(`${s.N.baseApiUrl}/user/friend-request/send/${t}`,{},this.httpOptions)}getFriendRequests(){return this.http.get(`${s.N.baseApiUrl}/user/friend-request/me/received-requests`)}respondToFriendRequest(t,i){return this.http.put(`${s.N.baseApiUrl}/user/friend-request/response/${t}`,{status:i},this.httpOptions)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(j.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var F=g(5861);function Ut(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-row",2)(2,"ion-col",3)(3,"ion-avatar"),e._UZ(4,"ion-img",4),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-card-title"),e._uU(7),e.qZA()()(),e.TgZ(8,"ion-row")(9,"ion-button",5),e.NdJ("click",function(){const d=e.CHM(t).$implicit,y=e.oxw(2);return e.KtG(y.respondToFriendRequest(d.id,"accepted"))}),e._uU(10,"Accept"),e.qZA(),e.TgZ(11,"ion-button",6),e.NdJ("click",function(){const d=e.CHM(t).$implicit,y=e.oxw(2);return e.KtG(y.respondToFriendRequest(d.id,"declined"))}),e._uU(12,"Decline"),e.qZA()(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(4),e.Q6J("src",t.fullImagePath),e.xp6(3),e.AsE("",t.creator.firstName," ",t.creator.lastName,"")}}function Ft(o,n){if(1&o&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-grid"),e.YNc(3,Ut,13,3,"ng-container",1),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.connectionProfileService.friendRequests)}}let Nt=(()=>{class o{constructor(t,i){this.popoverController=t,this.connectionProfileService=i}ngOnInit(){this.connectionProfileService.friendRequests.map(t=>{const i=t?.creator?.id;t&&i&&this.connectionProfileService.getConnectionUser(i).pipe((0,E.q)(1),(0,J.b)(r=>{t.fullImagePath=`${s.N.baseApiUrl}/feed/image/${r?.imagePath||"blank-profile-picture.png"}`})).subscribe()})}respondToFriendRequest(t,i){var r=this;return(0,F.Z)(function*(){const d=r.connectionProfileService.friendRequests.find(T=>T.id===t),y=r.connectionProfileService.friendRequests.filter(T=>T.id!==d.id);return r.connectionProfileService.friendRequests=y,r.connectionProfileService?.friendRequests&&(yield r.popoverController.dismiss()),r.connectionProfileService.respondToFriendRequest(t,i).pipe((0,E.q)(1)).subscribe()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.Dh),e.Y36(se))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-friend-request-popover"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],[3,"src"],["expand","block","size","small","fill","outline","color","primary",3,"click"],["expand","block","size","small","fill","outline","color","danger",3,"click"]],template:function(t,i){1&t&&e.YNc(0,Ft,4,1,"ion-card",0),2&t&&e.Q6J("ngIf",null==i.connectionProfileService?null:i.connectionProfileService.friendRequests)},dependencies:[f.sg,f.O5,a.BJ,a.YG,a.PM,a.Zi,a.Dq,a.wI,a.jY,a.Xz,a.Nd],styles:[".item-divider[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-light-tint)}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),o})();function qt(o,n){if(1&o&&e._UZ(0,"ion-img",8),2&o){const t=e.oxw();e.Q6J("src",t.userFullImagePath)}}let Rt=(()=>{class o{constructor(t,i){this.authService=t,this.popoverController=i,this.fullName$=new _.X(null),this.fullName=""}ngOnInit(){this.authService.userFullName.pipe((0,E.q)(1)).subscribe(t=>{this.fullName=t,this.fullName$.next(t)}),this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t})}ngOnDestroy(){this.userImagePathSubscription.unsubscribe()}onSignOut(){var t=this;return(0,F.Z)(function*(){yield t.popoverController.dismiss(),t.authService.logout(),location.reload()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.e),e.Y36(a.Dh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-popover"]],decls:35,vars:2,consts:[[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],[3,"src",4,"ngIf"],["expand","block","size","small","fill","outline","color","primary"],["color","dark"],[1,"ion-padding-top"],[1,"item-divider"],[3,"click"],[3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-grid")(3,"ion-row",0)(4,"ion-col",1)(5,"ion-avatar"),e.YNc(6,qt,1,1,"ion-img",2),e.qZA()(),e.TgZ(7,"ion-col")(8,"ion-card-title"),e._uU(9),e.qZA(),e.TgZ(10,"ion-card-subtitle"),e._uU(11,"Shit Ass Crack"),e.qZA()()()(),e.TgZ(12,"ion-button",3),e._uU(13," View Profile "),e.qZA()(),e.TgZ(14,"ion-card-content")(15,"ion-card-subtitle",4),e._uU(16,"Account"),e.qZA(),e.TgZ(17,"p",5),e._uU(18,"Setting & Privacy"),e.qZA(),e.TgZ(19,"p",5),e._uU(20,"Help"),e.qZA(),e.TgZ(21,"p",5),e._uU(22,"Language"),e.qZA()(),e._UZ(23,"div",6),e.TgZ(24,"ion-card-content")(25,"ion-card-subtitle",4),e._uU(26,"Manage"),e.qZA(),e.TgZ(27,"p",5),e._uU(28,"Posts & Activites"),e.qZA(),e.TgZ(29,"p",5),e._uU(30,"Job Posting Account"),e.qZA()(),e._UZ(31,"div",6),e.TgZ(32,"ion-card-content")(33,"p",7),e.NdJ("click",function(){return i.onSignOut()}),e._uU(34,"Sign Out"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",i.userFullImagePath),e.xp6(3),e.Oqu(i.fullName))},dependencies:[f.O5,a.BJ,a.YG,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.wI,a.jY,a.Xz,a.Nd],styles:[".item-divider[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-light-tint)}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),o})();function Lt(o,n){if(1&o&&e._UZ(0,"ion-img",22),2&o){const t=e.oxw();e.Q6J("src",t.userFullImagePath)}}const Ue=function(){return["/home"]},Dt=function(){return["/home/chat/connections"]};let Fe=(()=>{class o{constructor(t,i,r){this.popoverController=t,this.authService=i,this.connectionProfileService=r}ngOnInit(){this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t}),this.authService.getUserImageName().pipe((0,E.q)(1),(0,J.b)(({imageName:t})=>{this.authService.updateUserImagePath(t||"blank-profile-picture.png").subscribe()})).subscribe(),this.friendRequestsSubscription=this.connectionProfileService.getFriendRequests().subscribe(t=>{this.connectionProfileService.friendRequests=t.filter(i=>"pending"===i.status)})}ngOnDestroy(){this.userImagePathSubscription.unsubscribe(),this.friendRequestsSubscription.unsubscribe()}presentFriendRequestPopover(t){var i=this;return(0,F.Z)(function*(){const r=yield i.popoverController.create({component:Nt,event:t,showBackdrop:!1});yield r.present(),yield r.onDidDismiss()})()}presentPopover(t){var i=this;return(0,F.Z)(function*(){const r=yield i.popoverController.create({component:Rt,event:t,showBackdrop:!1});yield r.present(),yield r.onDidDismiss()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.Dh),e.Y36(U.e),e.Y36(se))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-header"]],decls:39,vars:8,consts:[[1,"ion-container","ion-no-border"],[1,"toolbar-wrapper"],["slot","start",1,"ion-no-padding"],[2,"cursor","pointer",3,"routerLink"],["color","primary","name","logo-linkedin",1,"linkedin-logo"],["color","tertiary","placeholder","Search",1,"ion-hide-lg-down"],[1,"ion-justify-content-end"],["size","auto",1,"ion-hide-md-down",2,"cursor","pointer",3,"routerLink"],["name","home"],["size","auto",1,"ion-hide-md-down",3,"click"],["name","people"],["color","danger",2,"position","absolute","margin-left","-8px","margin-top","-5px","height","16px","width","16px","border-radius","9999px"],["size","auto",1,"ion-hide-md-down"],["name","briefcase"],["name","chatbox-ellipses"],["size","auto",1,"ion-hide-md-down",2,"cursor","pointer"],["name","notifications"],["color","danger",2,"position","absolute","margin-left","-10px","margin-top","-5px","height","16px","width","16px","border-radius","9999px"],["size","auto",3,"click"],[3,"src",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center"],["name","caret-down-outline",2,"font-size","16px"],[3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"div",1)(3,"ion-buttons",2)(4,"ion-button",3),e._UZ(5,"ion-icon",4),e.qZA(),e._UZ(6,"ion-searchbar",5),e.qZA(),e.TgZ(7,"ion-grid")(8,"ion-row",6)(9,"ion-col",7),e._UZ(10,"ion-icon",8),e.TgZ(11,"div"),e._uU(12,"Home"),e.qZA()(),e.TgZ(13,"ion-col",9),e.NdJ("click",function(d){return(null==i.connectionProfileService||null==i.connectionProfileService.friendRequests?null:i.connectionProfileService.friendRequests.length)>0&&i.presentFriendRequestPopover(d)}),e._UZ(14,"ion-icon",10),e.TgZ(15,"ion-badge",11),e._uU(16),e.qZA(),e.TgZ(17,"div"),e._uU(18,"My Network"),e.qZA()(),e.TgZ(19,"ion-col",12),e._UZ(20,"ion-icon",13),e.TgZ(21,"div"),e._uU(22,"Jobs"),e.qZA()(),e.TgZ(23,"ion-col",7),e._UZ(24,"ion-icon",14),e.TgZ(25,"div"),e._uU(26,"Messageing"),e.qZA()(),e.TgZ(27,"ion-col",15),e._UZ(28,"ion-icon",16),e.TgZ(29,"ion-badge",17),e._uU(30," 2 "),e.qZA(),e.TgZ(31,"div"),e._uU(32,"Notifications"),e.qZA()(),e.TgZ(33,"ion-col",18),e.NdJ("click",function(d){return i.presentPopover(d)}),e.TgZ(34,"ion-avatar"),e.YNc(35,Lt,1,1,"ion-img",19),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"Me "),e._UZ(38,"ion-icon",21),e.qZA()()()()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(5,Ue)),e.xp6(5),e.Q6J("routerLink",e.DdM(6,Ue)),e.xp6(7),e.hij(" ",(null==i.connectionProfileService||null==i.connectionProfileService.friendRequests?null:i.connectionProfileService.friendRequests.length)||0," "),e.xp6(7),e.Q6J("routerLink",e.DdM(7,Dt)),e.xp6(12),e.Q6J("ngIf",i.userFullImagePath))},dependencies:[f.O5,a.BJ,a.yp,a.YG,a.Sm,a.wI,a.jY,a.Gu,a.gu,a.Xz,a.Nd,a.VI,a.sr,a.j9,a.YI,m.rH],styles:[".toolbar-wrapper[_ngcontent-%COMP%]{display:flex;max-width:1128px;margin:auto}.linkedin-logo[_ngcontent-%COMP%]{font-size:40px}ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], ion-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:400}ion-searchbar[_ngcontent-%COMP%]{--box-shadow: none;transform:scale(.8);margin-left:-40px}ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-avatar[_ngcontent-%COMP%]{width:24px;height:24px;margin:auto}ion-col[_ngcontent-%COMP%]{width:80px!important;text-align:center}ion-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-light-tint)}"]}),o})();function zt(o,n){if(1&o&&e._UZ(0,"ion-img",14),2&o){const t=e.oxw();e.Q6J("src",t.user.imagePath)}}function jt(o,n){if(1&o&&(e.TgZ(0,"ion-card-title",9),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" ",t.user.firstName," ",t.user.lastName," ")}}const Jt=function(){return["pending","waiting-for-current-user-response"]};function Yt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addUser())}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",e.DdM(2,Jt).includes(t.friendRequestStatus)),e.xp6(1),e.Oqu("waiting-for-current-user-response"===t.friendRequestStatus?"Accept Request":"Connect")}}const Ht=function(){return["not-sent","pending","waiting-for-current-user-response"]};let Ne=(()=>{class o{constructor(t,i,r){this.bannerColorService=t,this.route=i,this.connectionProfileService=r}ngOnInit(){this.friendRequestStatusSubscription$=this.getFriendRequestStatus().pipe((0,J.b)(t=>{this.friendRequestStatus=t.status,this.userSubscription$=this.getUser().subscribe(i=>{this.user=i,this.user.imagePath="http://localhost:3000/api/feed/image/"+(i.imagePath??"blank-profile-picture.png")})})).subscribe()}getUser(){return this.getUserIdFromUrl().pipe((0,Y.w)(t=>this.connectionProfileService.getConnectionUser(t)))}addUser(){return this.friendRequestStatus="pending",this.getUserIdFromUrl().pipe((0,Y.w)(t=>this.connectionProfileService.addConnectionUser(t))).pipe((0,E.q)(1)).subscribe()}getFriendRequestStatus(){return this.getUserIdFromUrl().pipe((0,Y.w)(t=>this.connectionProfileService.getFriendRequestStatus(t)))}ngOnDestroy(){this.userSubscription$.unsubscribe(),this.friendRequestStatusSubscription$.unsubscribe()}getUserIdFromUrl(){return this.route.url.pipe((0,It.U)(t=>+t[0].path))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ie),e.Y36(m.gz),e.Y36(se))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-connection-profile"]],decls:21,vars:12,consts:[[1,"backdrop"],[1,"background-one"],[1,"half-eclipse"],[1,"background-two"],[1,"background-three"],[1,"ion-text-center"],[1,"ion-margin-auto",2,"cursor","pointer"],[3,"src",4,"ngIf"],["class","ion-text-left",4,"ngIf"],[1,"ion-text-left"],[4,"ngIf"],["fill","outline"],["slot","start","name","lock-closed"],["fill","outline","shape","round"],[3,"src"],["shape","round",3,"disabled","click"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"ion-content")(2,"ion-card")(3,"div",0),e._UZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4),e.qZA(),e.TgZ(8,"ion-card-header",5)(9,"ion-avatar",6),e.YNc(10,zt,1,1,"ion-img",7),e.qZA(),e.YNc(11,jt,2,2,"ion-card-title",8),e.TgZ(12,"ion-card-subtitle",9),e._uU(13," Chak Bhamba bhusdi "),e.qZA()(),e.TgZ(14,"ion-card-content"),e.YNc(15,Yt,3,3,"ng-container",10),e.TgZ(16,"ion-button",11),e._UZ(17,"ion-icon",12),e._uU(18," Message "),e.qZA(),e.TgZ(19,"ion-button",13),e._uU(20,"More"),e.qZA()()()()),2&t&&(e.xp6(4),e.Udp("background",i.bannerColorService.bannerColors.colorOne),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorOne),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorTwo),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorThree),e.xp6(3),e.Q6J("ngIf",i.user),e.xp6(1),e.Q6J("ngIf",i.user),e.xp6(4),e.Q6J("ngIf",e.DdM(11,Ht).includes(i.friendRequestStatus)))},dependencies:[f.O5,a.BJ,a.YG,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.W2,a.gu,a.Xz,Fe],styles:["ion-card[_ngcontent-%COMP%]{margin:110px auto 0;width:782px;box-shadow:none;border:1px solid #e1e1e1}@media (max-width: 960px){ion-card[_ngcontent-%COMP%]{width:auto;margin:20px}}.backdrop[_ngcontent-%COMP%]{height:196px;display:flex;background-color:#dbe7e9}.backdrop[_ngcontent-%COMP%]   .background-one[_ngcontent-%COMP%]{width:70%;height:100%}.backdrop[_ngcontent-%COMP%]   .background-two[_ngcontent-%COMP%]{width:27px;height:5%}.backdrop[_ngcontent-%COMP%]   .background-three[_ngcontent-%COMP%]{width:25px;height:25%}.backdrop[_ngcontent-%COMP%]   .half-eclipse[_ngcontent-%COMP%]{border-radius:0 100% 100% 0/50%;background-color:#a0b4b7;width:2%;height:100%}ion-card-header[_ngcontent-%COMP%]{margin-top:-112px}ion-card-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:152px;height:152px;border:2px solid var(--ion-color-primary-contrast);box-shadow:inset 0 0 0 10px var(--ion-color-primary-contrast)}"]}),o})();var Qt=g(2149),qe=g(4524),ae=g(7979);function $t(o,n){if(1&o&&e._UZ(0,"ion-img",15),2&o){const t=e.oxw();e.Q6J("src",t.userFullImagePath)}}let Gt=(()=>{class o{constructor(t,i){this.authService=t,this.bannerColorService=i,this.validFileExtensions=["png","jpeg","jpg"],this.validMimeTypes=["image/png","image/jpeg","image/jpg"],this.fullName$=new _.X(null),this.fullName=""}ngOnInit(){this.form=new x.cw({file:new x.NI(null)}),this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t}),this.userSubscription=this.authService.userStream.subscribe(t=>{t?.role&&(this.bannerColorService.bannerColors=this.bannerColorService.getBannerColors(t.role)),t&&t?.firstName&&t?.lastName&&(this.fullName=t.firstName+" "+t.lastName,this.fullName$.next(this.fullName))})}ngOnDestroy(){this.userSubscription.unsubscribe(),this.userImagePathSubscription.unsubscribe()}onFileSelect(t){const i=t.target.files[0];if(!i)return;const r=new FormData;r.append("file",i),(0,qe.Dp)(i.arrayBuffer()).pipe((0,Y.w)(d=>(0,qe.Dp)((0,Qt.fromBuffer)(d)).pipe((0,Y.w)(y=>{if(!y)return console.log({error:"file format not supported!"}),(0,ae.of)();const{ext:T,mime:k}=y,Z=this.validFileExtensions.includes(T),N=this.validMimeTypes.includes(k);return Z&&N?this.authService.uploadUserImage(r):(console.log({error:"file format does not amtch file extension!"}),(0,ae.of)())})))).subscribe(),this.form.reset()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.e),e.Y36(Ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile-summary"]],decls:29,vars:10,consts:[[1,"backdrop"],[1,"background-one"],[1,"half-eclipse"],[1,"background-two"],[1,"background-three"],[1,"ion-text-center"],["type","file","name","","id","",2,"display","none",3,"change"],["fileUpload",""],[1,"ion-margin-auto",2,"cursor","pointer",3,"click"],[3,"src",4,"ngIf"],[1,"ion-margin-top"],[1,"item-divider"],["color","primary"],[1,"connections"],["color","dark"],[3,"src"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"ion-card")(1,"div",0),e._UZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.qZA(),e.TgZ(6,"ion-card-header",5)(7,"input",6,7),e.NdJ("change",function(y){return i.onFileSelect(y)}),e.qZA(),e.TgZ(9,"ion-avatar",8),e.NdJ("click",function(){e.CHM(r);const y=e.MAs(8);return e.KtG(y.click())}),e.YNc(10,$t,1,1,"ion-img",9),e.qZA(),e.TgZ(11,"ion-card-title",10),e._uU(12),e.qZA(),e.TgZ(13,"ion-card-subtitle"),e._uU(14," Chak Bhamba bhusdi "),e.qZA()(),e._UZ(15,"div",11),e.TgZ(16,"ion-card-content")(17,"div")(18,"span"),e._uU(19,"Who viewed your profile"),e.qZA(),e.TgZ(20,"ion-text",12),e._uU(21,"420"),e.qZA()(),e.TgZ(22,"div",13)(23,"span"),e._uU(24,"Connections"),e.qZA(),e.TgZ(25,"ion-text",12),e._uU(26,"2342324"),e.qZA()(),e.TgZ(27,"ion-card-subtitle",14),e._uU(28,"Manage your network"),e.qZA()()()}2&t&&(e.xp6(2),e.Udp("background",i.bannerColorService.bannerColors.colorOne),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorOne),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorTwo),e.xp6(1),e.Udp("background",i.bannerColorService.bannerColors.colorThree),e.xp6(5),e.Q6J("ngIf",i.userFullImagePath),e.xp6(2),e.hij(" ",i.fullName," "))},dependencies:[f.O5,a.BJ,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.Xz,a.yW],styles:["ion-card[_ngcontent-%COMP%]{width:225px;box-shadow:none;border:1px solid #e1e1e1}.backdrop[_ngcontent-%COMP%]{height:54px;display:flex;background-color:#dbe7e9}.backdrop[_ngcontent-%COMP%]   .background-one[_ngcontent-%COMP%]{width:170px;height:100%}.backdrop[_ngcontent-%COMP%]   .background-two[_ngcontent-%COMP%]{width:27px;height:100%}.backdrop[_ngcontent-%COMP%]   .background-three[_ngcontent-%COMP%]{width:25px;height:100%}.backdrop[_ngcontent-%COMP%]   .half-eclipse[_ngcontent-%COMP%]{border-radius:0 100% 100% 0/50%;background-color:#a0b4b7;width:3px;height:100%}ion-card-header[_ngcontent-%COMP%]{margin-top:-54px}ion-card-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:72px;height:72px;margin:auto;border:2px solid var(--ion-color-primary-contrast);box-shadow:inset 0 0 0 10px var(--ion-color-primary-contrast)}ion-card-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.connections[_ngcontent-%COMP%]{margin-top:8px}"]}),o})();const Vt=["form"];function Wt(o,n){if(1&o&&e._UZ(0,"ion-img",25),2&o){const t=e.oxw();e.Q6J("src",t.userFullImagePath)}}let ce=(()=>{class o{constructor(t,i){this.modalController=t,this.authService=i,this.fullName$=new _.X(null),this.fullName=""}ngOnInit(){this.authService.userFullName.pipe((0,E.q)(1)).subscribe(t=>{this.fullName=t,this.fullName$.next(t)}),this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t})}ngOnDestroy(){this.userImagePathSubscription.unsubscribe()}onDismiss(){this.modalController.dismiss(null,"dismiss")}onPost(){this.form.valid&&this.modalController.dismiss({post:{body:this.form.value.body,createdAt:new Date}},"post")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.IN),e.Y36(U.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal"]],viewQuery:function(t,i){if(1&t&&e.Gf(Vt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.form=r.first)}},inputs:{postId:"postId"},decls:44,vars:5,consts:[[1,"heading","ion-padding"],["size","small","color","dark","fill","clear","shape","round",3,"click"],["slot","icon-only","size","large","name","close-outline"],[1,"item-divider"],[1,"ion-padding"],[1,"ion-justify-content-start"],["size","auto"],[3,"src",4,"ngIf"],["size","small","shape","round","fill","outline","color","medium"],["color","dark","name","globe-outline"],[1,"view-status"],["color","dark","name","caret-down-outline"],[1,"ion-padding",3,"ngSubmit"],["form","ngForm"],["rows","5","placeholder","What do you want to talk about?","type","text","name","body","required","","ngModel",""],["fill","clear"],[1,"action-items"],["size","small","shape","round","color","dark","fill","clear"],["slot","icon-only","name","add",1,"ion-heading-none"],["slot","icon-only","name","image-outline",1,"ion-heading-none"],["slot","icon-only","name","play-sharp",1,"ion-heading-none"],["slot","icon-only","name","calendar-outline",1,"ion-heading-none"],["name","image-outline",1,"ion-heading-none"],["name","chatbox-ellipses-outline",1,"ion-padding-none"],["type","submit",1,"ion-margin",3,"disabled"],[3,"src"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"ion-text"),e._uU(3),e.qZA(),e.TgZ(4,"ion-button",1),e.NdJ("click",function(){return i.onDismiss()}),e._UZ(5,"ion-icon",2),e.qZA()(),e._UZ(6,"div",3),e.TgZ(7,"ion-grid",4)(8,"ion-row",5)(9,"ion-col",6)(10,"ion-avatar"),e.YNc(11,Wt,1,1,"ion-img",7),e.qZA()(),e.TgZ(12,"ion-col")(13,"div")(14,"ion-text"),e._uU(15),e.qZA()(),e.TgZ(16,"ion-button",8),e._UZ(17,"ion-icon",9),e.TgZ(18,"ion-text",10),e._uU(19,"Anyone"),e.qZA(),e._UZ(20,"ion-icon",11),e.qZA()()()(),e.TgZ(21,"form",12,13),e.NdJ("ngSubmit",function(){return i.onPost()}),e._UZ(23,"ion-textarea",14),e.TgZ(24,"ion-button",15),e._uU(25,"Add hashtag"),e.qZA(),e.TgZ(26,"div",16)(27,"div")(28,"ion-button",17),e._UZ(29,"ion-icon",18),e.qZA(),e.TgZ(30,"ion-button",17),e._UZ(31,"ion-icon",19),e.qZA(),e.TgZ(32,"ion-button",17),e._UZ(33,"ion-icon",20),e.qZA(),e.TgZ(34,"ion-button",17),e._UZ(35,"ion-icon",21),e.qZA(),e.TgZ(36,"ion-button",17),e._UZ(37,"ion-icon",22),e.qZA(),e.TgZ(38,"ion-button",17),e._UZ(39,"ion-icon",23),e.TgZ(40,"ion-text",10),e._uU(41,"Anyone"),e.qZA()()(),e.TgZ(42,"ion-button",24),e._uU(43),e.qZA()()()()),2&t){const r=e.MAs(22);e.xp6(3),e.hij("",i.postId?"Edit":"Create"," a post"),e.xp6(8),e.Q6J("ngIf",i.userFullImagePath),e.xp6(4),e.hij(" ",i.fullName," "),e.xp6(27),e.Q6J("disabled",!r.valid),e.xp6(1),e.hij(" ",i.postId?"Edit":"Create"," ")}},dependencies:[f.O5,x._Y,x.JJ,x.JL,x.Q7,x.On,x.F,a.BJ,a.YG,a.wI,a.jY,a.gu,a.Xz,a.Nd,a.yW,a.g2,a.j9],styles:[".heading[_ngcontent-%COMP%]{font-size:24px;display:flex;justify-content:space-between;align-items:center}.heading[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding:0}ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width: 1px;height:30px;width:112px}ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .view-status[_ngcontent-%COMP%]{margin:0 6px}.action-items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),o})();function Kt(o,n){if(1&o&&e._UZ(0,"ion-img",9),2&o){const t=e.oxw();e.Q6J("src",t.userFullImagePath)}}let Xt=(()=>{class o{constructor(t,i){this.modalController=t,this.authService=i,this.create=new e.vpe}ngOnInit(){this.userImagePathSubscription=this.authService.userFullImagePath.subscribe(t=>{this.userFullImagePath=t})}ngOnDestroy(){this.userImagePathSubscription.unsubscribe()}presentModal(){var t=this;return(0,F.Z)(function*(){const i=yield t.modalController.create({component:ce});yield i.present();const{data:r}=yield i.onDidDismiss();!r||t.create.emit(r.post.body)})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.IN),e.Y36(U.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-start-post"]],outputs:{create:"create"},decls:24,vars:1,consts:[[3,"src",4,"ngIf"],["shape","round","fill","outline","color","medium",3,"click"],[1,"ion-text-left"],[1,"ion-hide-sm-down"],["color","medium","fill","clear"],["color","secondary","name","image-outline"],["color","success","name","play-sharp"],["color","warning","name","calendar-outline"],["color","danger","name","newspaper-outline"],[3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-avatar"),e.YNc(3,Kt,1,1,"ion-img",0),e.qZA(),e.TgZ(4,"ion-button",1),e.NdJ("click",function(){return i.presentModal()}),e.TgZ(5,"span",2),e._uU(6,"Start a post"),e.qZA()()(),e.TgZ(7,"ion-card-content",3)(8,"ion-button",4),e._UZ(9,"ion-icon",5),e.TgZ(10,"ion-text"),e._uU(11,"Photo"),e.qZA()(),e.TgZ(12,"ion-button",4),e._UZ(13,"ion-icon",6),e.TgZ(14,"ion-text"),e._uU(15,"Video"),e.qZA()(),e.TgZ(16,"ion-button",4),e._UZ(17,"ion-icon",7),e.TgZ(18,"ion-text"),e._uU(19,"Event"),e.qZA()(),e.TgZ(20,"ion-button",4),e._UZ(21,"ion-icon",8),e.TgZ(22,"ion-text"),e._uU(23,"Write Article"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",i.userFullImagePath))},dependencies:[f.O5,a.BJ,a.YG,a.PM,a.FN,a.Zi,a.gu,a.Xz,a.yW],styles:["ion-card[_ngcontent-%COMP%]{width:525px;box-shadow:none;border:1px solid #e1e1e1}@media (max-width: 576px){ion-card[_ngcontent-%COMP%]{width:500px}}@media (max-width: 525px){ion-card[_ngcontent-%COMP%]{width:420px}}@media (max-width: 440px){ion-card[_ngcontent-%COMP%]{width:340px}}@media (max-width: 360px){ion-card[_ngcontent-%COMP%]{width:280px}}ion-card-header[_ngcontent-%COMP%]{display:flex}ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px}ion-card-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width: 1px;height:48px;width:100%;margin-left:16px}span.ion-text-left[_ngcontent-%COMP%]{margin-right:auto}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),o})(),en=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-advertising"]],decls:25,vars:0,consts:[["name","information"],["color","dark"],[1,"first-course"],["color","medium","size","small","fill","clear"],["color","dark","name","arrow-forward-outline",1,"ion-padding"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-text")(3,"h5"),e._uU(4,"Today's most viewed courses"),e.qZA(),e._UZ(5,"ion-icon",0),e.qZA()(),e.TgZ(6,"ion-card-content")(7,"ion-text",1)(8,"h6",2),e._uU(9,"1. High end gaddiyaan"),e.qZA()(),e.TgZ(10,"p"),e._uU(11,"Jatt doe | jatt mehkma"),e.qZA(),e.TgZ(12,"ion-text",1)(13,"h6"),e._uU(14,"2. Same BEEF"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"Sishu Moosewala | Moosa Jatt"),e.qZA(),e.TgZ(17,"ion-text",1)(18,"h6"),e._uU(19,"3. Jatt id hind"),e.qZA()(),e.TgZ(20,"p"),e._uU(21,"Yamla Jatt | Jatt yamla kamla"),e.qZA(),e.TgZ(22,"ion-button",3),e._uU(23,"View all recommnedations "),e._UZ(24,"ion-icon",4),e.qZA()()())},dependencies:[a.YG,a.PM,a.FN,a.Zi,a.gu,a.yW],styles:["ion-card[_ngcontent-%COMP%]{width:315px;box-shadow:none;border:1px solid #e1e1e1}ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}ion-card-header[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-card-header[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{background-color:var(--ion-color-medium-shade);color:var(--ion-color-dark-contrast);border-radius:4px}ion-card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-top:0}ion-card-content[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:not(.first-course){margin-top:8px}ion-card-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:500}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:16px}"]}),o})();var tn=g(3379);let nn=(()=>{class o{constructor(t){this.toastController=t}presentToast(t){var i=this;return(0,F.Z)(function*(){(yield i.toastController.create({header:"Error Occurred!",message:t,duration:2e3,color:"danger",buttons:[{icon:"bug",text:"dismiss",role:"cancel"}]})).present()})()}handleError(t="operation",i){return r=>(console.warn(`${t} failed: ${r.message}`),(0,ae.of)(i).pipe((0,J.b)(()=>this.presentToast(r.message))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(a.yF))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),on=(()=>{class o{constructor(t,i,r){this.http=t,this.authService=i,this.errorHandlerService=r,this.httpOptions={headers:new j.WM({"Content-Type":"application/json"})}}getSelectedPosts(t){return this.http.get(s.N.baseApiUrl+"/feed"+t).pipe((0,J.b)(i=>{if(0===i.length)throw new Error("No Posts to retrieve")}),(0,tn.K)(this.errorHandlerService.handleError("getSelectedPosts",[])))}createPost(t){return this.http.post(s.N.baseApiUrl+"/feed",{body:t},this.httpOptions).pipe((0,E.q)(1))}updatePost(t,i){return this.http.put(s.N.baseApiUrl+"/feed/"+t,{body:i},this.httpOptions).pipe((0,E.q)(1))}deletePost(t){return this.http.delete(s.N.baseApiUrl+"/feed/"+t).pipe((0,E.q)(1))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(j.eN),e.LFG(U.e),e.LFG(nn))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function rn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",22)(1,"ion-icon",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,d=e.oxw(2);return e.KtG(d.presentUpdateModal(r.id))}),e.qZA(),e.TgZ(2,"ion-icon",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,d=e.oxw(2);return e.KtG(d.deletePost(r.id))}),e.qZA()()}}const Re=function(o){return["/","home",o]};function sn(o,n){if(1&o&&(e.TgZ(0,"ion-card")(1,"ion-grid")(2,"ion-row",6)(3,"ion-col",7)(4,"ion-avatar",8),e._UZ(5,"ion-img",9),e.qZA()(),e.TgZ(6,"ion-col")(7,"div",10),e._uU(8),e.qZA(),e.TgZ(9,"div",11),e._uU(10,"Shit Ass Crack"),e.qZA(),e.TgZ(11,"div",12),e._uU(12," 1d"),e._UZ(13,"ion-icon",13),e._uU(14," Edited "),e._UZ(15,"ion-icon",13)(16,"ion-icon",14),e.qZA()(),e.YNc(17,rn,3,0,"ion-col",15),e.ALo(18,"async"),e.qZA(),e.TgZ(19,"p",16),e._uU(20),e.qZA(),e.TgZ(21,"ion-row")(22,"ion-button",17),e._UZ(23,"ion-icon",18),e.TgZ(24,"ion-text"),e._uU(25,"Like"),e.qZA()(),e.TgZ(26,"ion-button",17),e._UZ(27,"ion-icon",19),e.TgZ(28,"ion-text"),e._uU(29,"Comment"),e.qZA()(),e.TgZ(30,"ion-button",17),e._UZ(31,"ion-icon",20),e.TgZ(32,"ion-text"),e._uU(33,"Share"),e.qZA()(),e.TgZ(34,"ion-button",17),e._UZ(35,"ion-icon",21),e.TgZ(36,"ion-text"),e._uU(37,"Send"),e.qZA()()()()()),2&o){const t=n.$implicit,i=e.oxw(2);e.xp6(4),e.Q6J("routerLink",e.VKq(9,Re,t.author.id)),e.xp6(1),e.Q6J("src",t.fullImagePath),e.xp6(2),e.Q6J("routerLink",e.VKq(11,Re,t.author.id)),e.xp6(1),e.AsE("",t.author.firstName," ",t.author.lastName,""),e.xp6(9),e.Q6J("ngIf",e.lcZ(18,7,i.userId$)===t.author.id),e.xp6(3),e.Oqu(t.body)}}function an(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"ion-content")(2,"ion-list"),e.YNc(3,sn,38,13,"ion-card",2),e.qZA(),e.TgZ(4,"ion-infinite-scroll",3),e.NdJ("ionInfinite",function(r){e.CHM(t);const d=e.oxw();return e.KtG(d.loadData(r))}),e._UZ(5,"ion-infinite-scroll-content",4),e.qZA()(),e._UZ(6,"div",5),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.allLoadedPosts)}}let cn=(()=>{class o{constructor(t,i,r){this.postService=t,this.authService=i,this.modalController=r,this.allLoadedPosts=[],this.numberOfPosts=5,this.skipPosts=0,this.userId$=new _.X(null)}ngOnInit(){this.userSubscription=this.authService.userStream.subscribe(t=>{this.allLoadedPosts.forEach((i,r)=>{t?.imagePath&&i.author.id===t.id&&(this.allLoadedPosts[r].fullImagePath=this.authService.getFullImagePath(t.imagePath))})}),this.getPosts(!1,""),this.authService.userId.pipe((0,E.q)(1)).subscribe(t=>{this.userId$.next(t)})}ngOnChanges(t){const i=t.postBody.currentValue;!i||this.postService.createPost(i).subscribe(r=>{this.authService.userFullImagePath.pipe((0,E.q)(1)).subscribe(d=>{r.fullImagePath=d}),this.allLoadedPosts.unshift(r)})}ngOnDestroy(){this.userSubscription.unsubscribe()}getPosts(t,i){20===this.skipPosts&&(i.target.disabled=!0),this.queryParams=`?take=${this.numberOfPosts}&skip=${this.skipPosts}`,this.postService.getSelectedPosts(this.queryParams).subscribe(r=>{for(const d of r){const y=!!d.author.imagePath;let T=this.authService.getDefaultFullImagePath();y&&(T=this.authService.getFullImagePath(d.author.imagePath)),d.fullImagePath=T,this.allLoadedPosts.push(d)}t&&i.target.complete(),this.skipPosts=this.skipPosts+5},r=>{console.log(r)})}loadData(t){this.getPosts(!0,t)}presentUpdateModal(t){var i=this;return(0,F.Z)(function*(){const r=yield i.modalController.create({component:ce,componentProps:{postId:t}});yield r.present();const{data:d}=yield r.onDidDismiss();if(!d)return;const T=d.post.body;i.postService.updatePost(t,T).subscribe(()=>{const k=i.allLoadedPosts.findIndex(Z=>Z.id===t);i.allLoadedPosts[k].body=T})})()}deletePost(t){this.postService.deletePost(t).subscribe(()=>{this.allLoadedPosts=this.allLoadedPosts.filter(i=>i.id!==t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(on),e.Y36(U.e),e.Y36(a.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-all-posts"]],viewQuery:function(t,i){if(1&t&&e.Gf(a.ju,5),2&t){let r;e.iGM(r=e.CRH())&&(i.infiniteScroll=r.first)}},inputs:{postBody:"postBody"},features:[e.TTD],decls:1,vars:1,consts:[["class","all-posts-container",4,"ngIf"],[1,"all-posts-container"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"hide-scroll"],[1,"ion-align-items-center","ion-justify-content"],["size","auto",1,"ion-padding"],[2,"cursor","pointer",3,"routerLink"],[3,"src"],[1,"full-name",2,"cursor","pointer",3,"routerLink"],[1,"role"],[1,"meta-data"],["name","ellipse"],["color","dark","name","globe-outline"],["style","margin-top: -32px;","class","ion-text-right",4,"ngIf"],[1,"post-body"],["color","medium","fill","clear"],["name","thumbs-up-outline"],["name","chatbox-ellipses-outline"],["name","arrow-redo-outline"],["name","paper-plane-outline"],[1,"ion-text-right",2,"margin-top","-32px"],["name","create-outline","color","dark",2,"font-size","18px","cursor","pointer",3,"click"],["name","trash-outline","color","danger",2,"font-size","18px","cursor","pointer",3,"click"]],template:function(t,i){1&t&&e.YNc(0,an,7,1,"div",0),2&t&&e.Q6J("ngIf",i.allLoadedPosts.length>0)},dependencies:[f.sg,f.O5,a.BJ,a.YG,a.PM,a.wI,a.W2,a.jY,a.gu,a.Xz,a.ju,a.MB,a.q_,a.Nd,a.yW,a.YI,m.rH,f.Ov],styles:[".all-posts-container[_ngcontent-%COMP%]{display:flex}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{height:calc(100vh - 320px)}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background-color:#f3f2ef;padding-top:0}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #e1e1e1;width:518px}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-weight:500}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:12px;margin-top:2px;margin-bottom:1px}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .meta-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-size:12px;width:80px}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-icon[name=ellipse][_ngcontent-%COMP%]{font-size:4px}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{margin:0;padding:0 16px}.all-posts-container[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px}.all-posts-container[_ngcontent-%COMP%]   .hide-scroll[_ngcontent-%COMP%]{height:calc(100vh - 320px);margin-left:-16px;border-right:16px solid #f3f2ef;z-index:2}"]}),o})(),ln=(()=>{class o{constructor(t){this.modalController=t}ngOnInit(){}presentModal(){var t=this;return(0,F.Z)(function*(){const i=yield t.modalController.create({component:ce});yield i.present();const{data:r,role:d}=yield i.onDidDismiss();r&&console.log("data exists!!"),console.log("role: ",d,"data: ",r)})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabs"]],decls:26,vars:0,consts:[["name","home"],["name","people"],[3,"click"],["name","add-circle"],["name","notifications"],["color","danger",2,"position","absolute","margin-left","-6px","margin-top","-10px","height","16px","width","16px","border-radius","9999px"],[2,"font-weight","400","font-size","12px","margin-left","-1px"],["name","briefcase"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-toolbar")(1,"ion-tabs")(2,"ion-tab-bar")(3,"ion-tab-button"),e._UZ(4,"ion-icon",0),e.TgZ(5,"div"),e._uU(6,"Home"),e.qZA()(),e.TgZ(7,"ion-tab-button"),e._UZ(8,"ion-icon",1),e.TgZ(9,"div"),e._uU(10,"My Network"),e.qZA()(),e.TgZ(11,"ion-tab-button",2),e.NdJ("click",function(){return i.presentModal()}),e._UZ(12,"ion-icon",3),e.TgZ(13,"div"),e._uU(14,"Post"),e.qZA()(),e.TgZ(15,"ion-tab-button"),e._UZ(16,"ion-icon",4),e.TgZ(17,"ion-badge",5)(18,"ion-text",6),e._uU(19,"2"),e.qZA()(),e.TgZ(20,"div"),e._uU(21,"Notifications"),e.qZA()(),e.TgZ(22,"ion-tab-button"),e._UZ(23,"ion-icon",7),e.TgZ(24,"div"),e._uU(25,"Jobs"),e.qZA()()()()())},dependencies:[a.yp,a.gu,a.yq,a.ZU,a.yW,a.sr,a.UN],styles:["ion-toolbar[_ngcontent-%COMP%]{height:50px}ion-toolbar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]{padding-top:4px}"]}),o})();const un=[{path:"",component:(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:2,vars:0,template:function(t,i){1&t&&e._UZ(0,"app-header")(1,"ion-router-outlet")},dependencies:[a.jP,Fe],styles:["[_nghost-%COMP%]{display:flex;justify-content:flex-start;min-height:100vh;flex-direction:column}.content-container[_ngcontent-%COMP%]{display:flex;width:1128px;margin:40px auto 0}@media (max-width: 1200px){.content-container[_ngcontent-%COMP%]{width:auto;justify-content:center;margin-top:0}}app-all-posts[_ngcontent-%COMP%], .post-divider[_ngcontent-%COMP%]{margin:0 12px}.post-divider[_ngcontent-%COMP%]{padding-top:8px;margin:0 12px}app-tabs[_ngcontent-%COMP%]{margin-top:auto}"]}),o})(),children:[{path:"",component:(()=>{class o{constructor(){this.body=""}onCreatePost(t){this.body=t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-profile"]],decls:8,vars:1,consts:[[1,"content-container"],[1,"ion-hide-xl-down"],[3,"create"],[1,"item-divider","post-divider"],[3,"postBody"],[1,"ion-hide-md-up"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-profile-summary",1),e.TgZ(2,"div")(3,"app-start-post",2),e.NdJ("create",function(d){return i.onCreatePost(d)}),e.qZA(),e._UZ(4,"div",3)(5,"app-all-posts",4),e.qZA(),e._UZ(6,"app-advertising",1),e.qZA(),e._UZ(7,"app-tabs",5)),2&t&&(e.xp6(5),e.Q6J("postBody",i.body))},dependencies:[Gt,Xt,en,cn,ln],styles:["[_nghost-%COMP%]{display:flex;justify-content:flex-start;min-height:100vh;flex-direction:column}.content-container[_ngcontent-%COMP%]{display:flex;width:1128px;margin:100px auto 0}@media (max-width: 1200px){.content-container[_ngcontent-%COMP%]{width:auto;justify-content:center;margin-top:0}}app-all-posts[_ngcontent-%COMP%], .post-divider[_ngcontent-%COMP%]{margin:0 12px}.post-divider[_ngcontent-%COMP%]{padding-top:8px;margin:0 12px}app-tabs[_ngcontent-%COMP%]{margin-top:auto}"]}),o})()},{path:":id",component:Ne},{path:"chat/connections",component:Bt}]},{path:":id",component:Ne}];let pn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(un),m.Bz]}),o})(),dn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,x.u5,a.Pc,pn]}),o})()},2149:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _asyncToGenerator=__webpack_require__(7156).default;const Token=__webpack_require__(1269),strtok3=__webpack_require__(1695),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=__webpack_require__(4830),supported=__webpack_require__(6876),minimumBytes=4100;function fromStream(h){return _fromStream.apply(this,arguments)}function _fromStream(){return(_fromStream=_asyncToGenerator(function*(h){const l=yield strtok3.fromStream(h);try{return yield fromTokenizer(l)}finally{yield l.close()}})).apply(this,arguments)}function fromBuffer(h){return _fromBuffer.apply(this,arguments)}function _fromBuffer(){return(_fromBuffer=_asyncToGenerator(function*(h){if(!(h instanceof Uint8Array||h instanceof ArrayBuffer||Buffer.isBuffer(h)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof h}\``);const l=h instanceof Buffer?h:Buffer.from(h);if(l&&l.length>1)return fromTokenizer(strtok3.fromBuffer(l))})).apply(this,arguments)}function _check(h,l,g){g={offset:0,...g};for(const[c,p]of l.entries())if(g.mask){if(p!==(g.mask[c]&h[c+g.offset]))return!1}else if(p!==h[c+g.offset])return!1;return!0}function fromTokenizer(h){return _fromTokenizer2.apply(this,arguments)}function _fromTokenizer2(){return(_fromTokenizer2=_asyncToGenerator(function*(h){try{return _fromTokenizer(h)}catch(l){if(!(l instanceof strtok3.EndOfStreamError))throw l}})).apply(this,arguments)}function _fromTokenizer(h){return _fromTokenizer3.apply(this,arguments)}function _fromTokenizer3(){return _fromTokenizer3=_asyncToGenerator(function*(h){let l=Buffer.alloc(minimumBytes);const c=(f,a)=>_check(l,f,a),p=(f,a)=>c(stringToBytes(f),a);if(h.fileInfo.size||(h.fileInfo.size=Number.MAX_SAFE_INTEGER),yield h.peekBuffer(l,{length:12,mayBeLess:!0}),c([66,77]))return{ext:"bmp",mime:"image/bmp"};if(c([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(c([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(c([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(c([37,33]))return yield h.peekBuffer(l,{length:24,mayBeLess:!0}),p("PS-Adobe-",{offset:2})&&p(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(c([31,160])||c([31,157]))return{ext:"Z",mime:"application/x-compress"};if(c([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(c([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(c([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(c([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(p("ID3")){yield h.ignore(6);const f=yield h.readToken(uint32SyncSafeToken);return h.position+f>h.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(yield h.ignore(f),fromTokenizer(h))}if(p("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===l[0]||70===l[0])&&c([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(c([71,73,70]))return{ext:"gif",mime:"image/gif"};if(p("FLIF"))return{ext:"flif",mime:"image/flif"};if(p("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(p("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(p("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(p("FORM"))return{ext:"aif",mime:"audio/aiff"};if(p("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(c([80,75,3,4])){try{for(;h.position+30<h.fileInfo.size;){yield h.readBuffer(l,{length:30});const f={compressedSize:l.readUInt32LE(18),uncompressedSize:l.readUInt32LE(22),filenameLength:l.readUInt16LE(26),extraFieldLength:l.readUInt16LE(28)};if(f.filename=yield h.readToken(new Token.StringType(f.filenameLength,"utf-8")),yield h.ignore(f.extraFieldLength),"META-INF/mozilla.rsa"===f.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(f.filename.endsWith(".rels")||f.filename.endsWith(".xml"))switch(f.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}if(f.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(f.filename.startsWith("3D/")&&f.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===f.filename&&f.compressedSize===f.uncompressedSize)switch(yield h.readToken(new Token.StringType(f.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}if(0===f.compressedSize){let a=-1;for(;a<0&&h.position<h.fileInfo.size;)yield h.peekBuffer(l,{mayBeLess:!0}),a=l.indexOf("504B0304",0,"hex"),yield h.ignore(a>=0?a:l.length)}else yield h.ignore(f.compressedSize)}}catch(f){if(!(f instanceof strtok3.EndOfStreamError))throw f}return{ext:"zip",mime:"application/zip"}}if(p("OggS")){yield h.ignore(28);const f=Buffer.alloc(8);return yield h.readBuffer(f),_check(f,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(f,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(f,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(f,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(f,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(f,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(c([80,75])&&(3===l[2]||5===l[2]||7===l[2])&&(4===l[3]||6===l[3]||8===l[3]))return{ext:"zip",mime:"application/zip"};if(p("ftyp",{offset:4})&&0!=(96&l[8])){const f=l.toString("binary",8,12).replace("\0"," ").trim();switch(f){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return f.startsWith("3g")?f.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(p("MThd"))return{ext:"mid",mime:"audio/midi"};if(p("wOFF")&&(c([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(p("wOF2")&&(c([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(c([212,195,178,161])||c([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(p("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(p("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(p("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(c([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(p("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(p("%PDF")){yield h.ignore(1350);const a=Buffer.alloc(Math.min(10485760,h.fileInfo.size));return yield h.readBuffer(a,{mayBeLess:!0}),a.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(c([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(c([73,73,42,0]))return p("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:c([28,0,254,0],{offset:8})||c([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:c([8,0,0,0],{offset:4})&&(c([45,0,254,0],{offset:8})||c([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(l=Buffer.alloc(24),yield h.peekBuffer(l),(c([16,251,134,1],{offset:4})||c([8,0,0,0],{offset:4}))&&c([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(c([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(p("MAC "))return{ext:"ape",mime:"audio/ape"};if(c([26,69,223,163])){let f=function(){return a.apply(this,arguments)},a=function(){return a=_asyncToGenerator(function*(){const b=yield h.peekNumber(Token.UINT8);let v=128,C=0;for(;0==(b&v)&&0!==v;)++C,v>>=1;const S=Buffer.alloc(C+1);return yield h.readBuffer(S),S}),a.apply(this,arguments)},x=function(){return m.apply(this,arguments)},m=function(){return m=_asyncToGenerator(function*(){const b=yield f(),v=yield f();v[0]^=128>>v.length-1;const C=Math.min(6,v.length);return{id:b.readUIntBE(0,b.length),len:v.readUIntBE(v.length-C,C)}}),m.apply(this,arguments)},_=function(b,v){return s.apply(this,arguments)},s=function(){return s=_asyncToGenerator(function*(b,v){for(;v>0;){const C=yield x();if(17026===C.id)return h.readToken(new Token.StringType(C.len,"utf-8"));yield h.ignore(C.len),--v}}),s.apply(this,arguments)};const e=yield x();switch(yield _(1,e.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(c([82,73,70,70])){if(c([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(c([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(c([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(p("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(c([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(p("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(p("MSCF")||p("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(c([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(c([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(c([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(c([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(p("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(p("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(c([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(p("IMPM"))return{ext:"it",mime:"audio/x-it"};if(p("-lh0-",{offset:2})||p("-lh1-",{offset:2})||p("-lh2-",{offset:2})||p("-lh3-",{offset:2})||p("-lh4-",{offset:2})||p("-lh5-",{offset:2})||p("-lh6-",{offset:2})||p("-lh7-",{offset:2})||p("-lzs-",{offset:2})||p("-lz4-",{offset:2})||p("-lz5-",{offset:2})||p("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(c([0,0,1,186])){if(c([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(c([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(p("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(c([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(p("<?xml "))return{ext:"xml",mime:"application/xml"};if(c([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(c([82,97,114,33,26,7])&&(0===l[6]||1===l[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(p("solid "))return{ext:"stl",mime:"model/stl"};if(p("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(p("!<arch>"))return yield h.ignore(8),"debian-binary"===(yield h.readToken(new Token.StringType(13,"ascii")))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(c([137,80,78,71,13,10,26,10])){let f=function(){return a.apply(this,arguments)},a=function(){return a=_asyncToGenerator(function*(){return{length:yield h.readToken(Token.INT32_BE),type:yield h.readToken(new Token.StringType(4,"binary"))}}),a.apply(this,arguments)};yield h.ignore(8);do{const x=yield f();if(x.length<0)return;switch(x.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:yield h.ignore(x.length+4)}}while(h.position+8<h.fileInfo.size);return{ext:"png",mime:"image/png"}}if(c([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(c([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(c([102,114,101,101],{offset:4})||c([109,100,97,116],{offset:4})||c([109,111,111,118],{offset:4})||c([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(c([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(p("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(c([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(c([48,38,178,117,142,102,207,17,166,217])){let f=function(){return a.apply(this,arguments)},a=function(){return a=_asyncToGenerator(function*(){const x=Buffer.alloc(16);return yield h.readBuffer(x),{id:x,size:Number(yield h.readToken(Token.UINT64_LE))}}),a.apply(this,arguments)};for(yield h.ignore(30);h.position+24<h.fileInfo.size;){const x=yield f();let m=x.size-24;if(_check(x.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const _=Buffer.alloc(16);if(m-=(yield h.readBuffer(_)),_check(_,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(_,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}yield h.ignore(m)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(c([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((c([126,16,4])||c([126,24,4]))&&c([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(c([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(c([0,0,0,12,106,80,32,32,13,10,135,10]))switch(yield h.ignore(20),yield h.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(c([255,10])||c([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(c([0,0,1,186])||c([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(c([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(c([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(c([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(c([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(yield h.peekBuffer(l,{length:Math.min(256,h.fileInfo.size),mayBeLess:!0}),p("BEGIN:")){if(p("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(p("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(p("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(p("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(p("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(c([4,0,0,0])&&l.length>=16){const f=l.readUInt32LE(12);if(f>12&&l.length>=f+16)try{const a=l.slice(16,f+16).toString();if(JSON.parse(a).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(c([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(p("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(c([71],{offset:4})&&(c([71],{offset:192})||c([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(c([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(c([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(c([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(c([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(c([76,80],{offset:34})&&(c([0,0,1],{offset:8})||c([1,0,2],{offset:8})||c([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(c([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(yield h.peekBuffer(l,{length:Math.min(512,h.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(l))return{ext:"tar",mime:"application/x-tar"};if(c([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(p("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(l.length>=2&&c([255,224],{offset:0,mask:[255,224]})){if(c([16],{offset:1,mask:[22]}))return c([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(c([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(c([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(c([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}),_fromTokenizer3.apply(this,arguments)}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",_asyncToGenerator(function*(){const h=new stream.PassThrough;let l;l=stream.pipeline?stream.pipeline(readableStream,h,()=>{}):readableStream.pipe(h);const g=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const c=yield fromBuffer(g);h.fileType=c}catch(c){reject(c)}resolve(l)}))}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},6876:h=>{"use strict";h.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}},4830:(h,l)=>{"use strict";l.stringToBytes=g=>[...g].map(c=>c.charCodeAt(0)),l.tarHeaderChecksumMatches=(g,c=0)=>{const p=parseInt(g.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(p))return!1;let f=256;for(let a=c;a<c+148;a++)f+=g[a];for(let a=c+156;a<c+512;a++)f+=g[a];return p===f},l.uint32SyncSafeToken={get:(g,c)=>127&g[c+3]|g[c+2]<<7|g[c+1]<<14|g[c]<<21,len:4}},8461:(h,l)=>{l.read=function(g,c,p,f,a){var x,m,_=8*a-f-1,s=(1<<_)-1,e=s>>1,u=-7,b=p?a-1:0,v=p?-1:1,C=g[c+b];for(b+=v,x=C&(1<<-u)-1,C>>=-u,u+=_;u>0;x=256*x+g[c+b],b+=v,u-=8);for(m=x&(1<<-u)-1,x>>=-u,u+=f;u>0;m=256*m+g[c+b],b+=v,u-=8);if(0===x)x=1-e;else{if(x===s)return m?NaN:1/0*(C?-1:1);m+=Math.pow(2,f),x-=e}return(C?-1:1)*m*Math.pow(2,x-f)},l.write=function(g,c,p,f,a,x){var m,_,s,e=8*x-a-1,u=(1<<e)-1,b=u>>1,v=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,C=f?0:x-1,S=f?1:-1,O=c<0||0===c&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(_=isNaN(c)?1:0,m=u):(m=Math.floor(Math.log(c)/Math.LN2),c*(s=Math.pow(2,-m))<1&&(m--,s*=2),(c+=m+b>=1?v/s:v*Math.pow(2,1-b))*s>=2&&(m++,s/=2),m+b>=u?(_=0,m=u):m+b>=1?(_=(c*s-1)*Math.pow(2,a),m+=b):(_=c*Math.pow(2,b-1)*Math.pow(2,a),m=0));a>=8;g[p+C]=255&_,C+=S,_/=256,a-=8);for(m=m<<a|_,e+=a;e>0;g[p+C]=255&m,C+=S,m/=256,e-=8);g[p+C-S]|=128*O}},4158:(h,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Deferred=void 0,l.Deferred=class g{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((p,f)=>{this.reject=f,this.resolve=p})}}},8828:(h,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.EndOfStreamError=l.defaultMessages=void 0,l.defaultMessages="End-Of-Stream";class g extends Error{constructor(){super(l.defaultMessages)}}l.EndOfStreamError=g},4194:(h,l,g)=>{"use strict";var c=g(7156).default;Object.defineProperty(l,"__esModule",{value:!0}),l.StreamReader=l.EndOfStreamError=void 0;const p=g(8828),f=g(4158);var a=g(8828);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}}),l.StreamReader=class m{constructor(s){if(this.s=s,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!s.read||!s.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new p.EndOfStreamError)),this.s.once("error",e=>this.reject(e)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}peek(s,e,u){var b=this;return c(function*(){const v=yield b.read(s,e,u);return b.peekQueue.push(s.subarray(e,e+v)),v})()}read(s,e,u){var b=this;return c(function*(){if(0===u)return 0;if(0===b.peekQueue.length&&b.endOfStream)throw new p.EndOfStreamError;let v=u,C=0;for(;b.peekQueue.length>0&&v>0;){const S=b.peekQueue.pop();if(!S)throw new Error("peekData should be defined");const O=Math.min(S.length,v);s.set(S.subarray(0,O),e+C),C+=O,v-=O,O<S.length&&b.peekQueue.push(S.subarray(O))}for(;v>0&&!b.endOfStream;){const S=Math.min(v,1048576),O=yield b.readFromStream(s,e+C,S);if(C+=O,O<S)break;v-=O}return C})()}readFromStream(s,e,u){var b=this;return c(function*(){const v=b.s.read(u);if(v)return s.set(v,e),v.length;{const C={buffer:s,offset:e,length:u,deferred:new f.Deferred};return b.deferred=C.deferred,b.s.once("readable",()=>{b.readDeferred(C)}),C.deferred.promise}})()}readDeferred(s){const e=this.s.read(s.length);e?(s.buffer.set(e,s.offset),s.deferred.resolve(e.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(s)})}reject(s){this.endOfStream=!0,this.deferred&&(this.deferred.reject(s),this.deferred=null)}}},5942:(h,l,g)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.StreamReader=l.EndOfStreamError=void 0;var c=g(8828);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return c.EndOfStreamError}});var p=g(4194);Object.defineProperty(l,"StreamReader",{enumerable:!0,get:function(){return p.StreamReader}})},6295:(h,l,g)=>{"use strict";var c=g(7156).default;Object.defineProperty(l,"__esModule",{value:!0}),l.AbstractTokenizer=void 0;const p=g(5942);l.AbstractTokenizer=class f{constructor(x){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=x||{}}readToken(x,m=this.position){var _=this;return c(function*(){const s=Buffer.alloc(x.len);if((yield _.readBuffer(s,{position:m}))<x.len)throw new p.EndOfStreamError;return x.get(s,0)})()}peekToken(x,m=this.position){var _=this;return c(function*(){const s=Buffer.alloc(x.len);if((yield _.peekBuffer(s,{position:m}))<x.len)throw new p.EndOfStreamError;return x.get(s,0)})()}readNumber(x){var m=this;return c(function*(){if((yield m.readBuffer(m.numBuffer,{length:x.len}))<x.len)throw new p.EndOfStreamError;return x.get(m.numBuffer,0)})()}peekNumber(x){var m=this;return c(function*(){if((yield m.peekBuffer(m.numBuffer,{length:x.len}))<x.len)throw new p.EndOfStreamError;return x.get(m.numBuffer,0)})()}ignore(x){var m=this;return c(function*(){if(void 0!==m.fileInfo.size){const _=m.fileInfo.size-m.position;if(x>_)return m.position+=_,_}return m.position+=x,x})()}close(){return c(function*(){})()}normalizeOptions(x,m){if(m&&void 0!==m.position&&m.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return m?{mayBeLess:!0===m.mayBeLess,offset:m.offset?m.offset:0,length:m.length?m.length:x.length-(m.offset?m.offset:0),position:m.position?m.position:this.position}:{mayBeLess:!1,offset:0,length:x.length,position:this.position}}}},6970:(h,l,g)=>{"use strict";var c=g(7156).default;Object.defineProperty(l,"__esModule",{value:!0}),l.BufferTokenizer=void 0;const p=g(5942),f=g(6295);l.BufferTokenizer=class a extends f.AbstractTokenizer{constructor(m,_){super(_),this.uint8Array=m,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:m.length}readBuffer(m,_){var s=this;return c(function*(){if(_&&_.position){if(_.position<s.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");s.position=_.position}const e=yield s.peekBuffer(m,_);return s.position+=e,e})()}peekBuffer(m,_){var s=this;return c(function*(){const e=s.normalizeOptions(m,_),u=Math.min(s.uint8Array.length-e.position,e.length);if(!e.mayBeLess&&u<e.length)throw new p.EndOfStreamError;return m.set(s.uint8Array.subarray(e.position,e.position+u),e.offset),u})()}close(){return c(function*(){})()}}},2315:(h,l,g)=>{"use strict";var c=g(7156).default;Object.defineProperty(l,"__esModule",{value:!0}),l.ReadStreamTokenizer=void 0;const p=g(6295),f=g(5942);l.ReadStreamTokenizer=class x extends p.AbstractTokenizer{constructor(_,s){super(s),this.streamReader=new f.StreamReader(_)}getFileInfo(){var _=this;return c(function*(){return _.fileInfo})()}readBuffer(_,s){var e=this;return c(function*(){const u=e.normalizeOptions(_,s),b=u.position-e.position;if(b>0)return yield e.ignore(b),e.readBuffer(_,s);if(b<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===u.length)return 0;const v=yield e.streamReader.read(_,u.offset,u.length);if(e.position+=v,(!s||!s.mayBeLess)&&v<u.length)throw new f.EndOfStreamError;return v})()}peekBuffer(_,s){var e=this;return c(function*(){const u=e.normalizeOptions(_,s);let b=0;if(u.position){const v=u.position-e.position;if(v>0){const C=new Uint8Array(u.length+v);return b=yield e.peekBuffer(C,{mayBeLess:u.mayBeLess}),_.set(C.subarray(v),u.offset),b-v}if(v<0)throw new Error("Cannot peek from a negative offset in a stream")}if(u.length>0){try{b=yield e.streamReader.peek(_,u.offset,u.length)}catch(v){if(s&&s.mayBeLess&&v instanceof f.EndOfStreamError)return 0;throw v}if(!u.mayBeLess&&b<u.length)throw new f.EndOfStreamError}return b})()}ignore(_){var s=this;return c(function*(){const e=Math.min(256e3,_),u=new Uint8Array(e);let b=0;for(;b<_;){const v=_-b,C=yield s.readBuffer(u,{length:Math.min(e,v)});if(C<0)return C;b+=C}return b})()}}},1695:(h,l,g)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.fromBuffer=l.fromStream=l.EndOfStreamError=void 0;const c=g(2315),p=g(6970);var f=g(5942);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return f.EndOfStreamError}}),l.fromStream=function a(m,_){return new c.ReadStreamTokenizer(m,_=_||{})},l.fromBuffer=function x(m,_){return new p.BufferTokenizer(m,_)}},1269:(h,l,g)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AnsiStringType=l.StringType=l.BufferType=l.Uint8ArrayType=l.IgnoreType=l.Float80_LE=l.Float80_BE=l.Float64_LE=l.Float64_BE=l.Float32_LE=l.Float32_BE=l.Float16_LE=l.Float16_BE=l.INT64_BE=l.UINT64_BE=l.INT64_LE=l.UINT64_LE=l.INT32_LE=l.INT32_BE=l.INT24_BE=l.INT24_LE=l.INT16_LE=l.INT16_BE=l.INT8=l.UINT32_BE=l.UINT32_LE=l.UINT24_BE=l.UINT24_LE=l.UINT16_BE=l.UINT16_LE=l.UINT8=void 0;const c=g(8461);function p(s){return new DataView(s.buffer,s.byteOffset)}l.UINT8={len:1,get:(s,e)=>p(s).getUint8(e),put:(s,e,u)=>(p(s).setUint8(e,u),e+1)},l.UINT16_LE={len:2,get:(s,e)=>p(s).getUint16(e,!0),put:(s,e,u)=>(p(s).setUint16(e,u,!0),e+2)},l.UINT16_BE={len:2,get:(s,e)=>p(s).getUint16(e),put:(s,e,u)=>(p(s).setUint16(e,u),e+2)},l.UINT24_LE={len:3,get(s,e){const u=p(s);return u.getUint8(e)+(u.getUint16(e+1,!0)<<8)},put(s,e,u){const b=p(s);return b.setUint8(e,255&u),b.setUint16(e+1,u>>8,!0),e+3}},l.UINT24_BE={len:3,get(s,e){const u=p(s);return(u.getUint16(e)<<8)+u.getUint8(e+2)},put(s,e,u){const b=p(s);return b.setUint16(e,u>>8),b.setUint8(e+2,255&u),e+3}},l.UINT32_LE={len:4,get:(s,e)=>p(s).getUint32(e,!0),put:(s,e,u)=>(p(s).setUint32(e,u,!0),e+4)},l.UINT32_BE={len:4,get:(s,e)=>p(s).getUint32(e),put:(s,e,u)=>(p(s).setUint32(e,u),e+4)},l.INT8={len:1,get:(s,e)=>p(s).getInt8(e),put:(s,e,u)=>(p(s).setInt8(e,u),e+1)},l.INT16_BE={len:2,get:(s,e)=>p(s).getInt16(e),put:(s,e,u)=>(p(s).setInt16(e,u),e+2)},l.INT16_LE={len:2,get:(s,e)=>p(s).getInt16(e,!0),put:(s,e,u)=>(p(s).setInt16(e,u,!0),e+2)},l.INT24_LE={len:3,get(s,e){const u=l.UINT24_LE.get(s,e);return u>8388607?u-16777216:u},put(s,e,u){const b=p(s);return b.setUint8(e,255&u),b.setUint16(e+1,u>>8,!0),e+3}},l.INT24_BE={len:3,get(s,e){const u=l.UINT24_BE.get(s,e);return u>8388607?u-16777216:u},put(s,e,u){const b=p(s);return b.setUint16(e,u>>8),b.setUint8(e+2,255&u),e+3}},l.INT32_BE={len:4,get:(s,e)=>p(s).getInt32(e),put:(s,e,u)=>(p(s).setInt32(e,u),e+4)},l.INT32_LE={len:4,get:(s,e)=>p(s).getInt32(e,!0),put:(s,e,u)=>(p(s).setInt32(e,u,!0),e+4)},l.UINT64_LE={len:8,get:(s,e)=>p(s).getBigUint64(e,!0),put:(s,e,u)=>(p(s).setBigUint64(e,u,!0),e+8)},l.INT64_LE={len:8,get:(s,e)=>p(s).getBigInt64(e,!0),put:(s,e,u)=>(p(s).setBigInt64(e,u,!0),e+8)},l.UINT64_BE={len:8,get:(s,e)=>p(s).getBigUint64(e),put:(s,e,u)=>(p(s).setBigUint64(e,u),e+8)},l.INT64_BE={len:8,get:(s,e)=>p(s).getBigInt64(e),put:(s,e,u)=>(p(s).setBigInt64(e,u),e+8)},l.Float16_BE={len:2,get(s,e){return c.read(s,e,!1,10,this.len)},put(s,e,u){return c.write(s,u,e,!1,10,this.len),e+this.len}},l.Float16_LE={len:2,get(s,e){return c.read(s,e,!0,10,this.len)},put(s,e,u){return c.write(s,u,e,!0,10,this.len),e+this.len}},l.Float32_BE={len:4,get:(s,e)=>p(s).getFloat32(e),put:(s,e,u)=>(p(s).setFloat32(e,u),e+4)},l.Float32_LE={len:4,get:(s,e)=>p(s).getFloat32(e,!0),put:(s,e,u)=>(p(s).setFloat32(e,u,!0),e+4)},l.Float64_BE={len:8,get:(s,e)=>p(s).getFloat64(e),put:(s,e,u)=>(p(s).setFloat64(e,u),e+8)},l.Float64_LE={len:8,get:(s,e)=>p(s).getFloat64(e,!0),put:(s,e,u)=>(p(s).setFloat64(e,u,!0),e+8)},l.Float80_BE={len:10,get(s,e){return c.read(s,e,!1,63,this.len)},put(s,e,u){return c.write(s,u,e,!1,63,this.len),e+this.len}},l.Float80_LE={len:10,get(s,e){return c.read(s,e,!0,63,this.len)},put(s,e,u){return c.write(s,u,e,!0,63,this.len),e+this.len}},l.IgnoreType=class f{constructor(e){this.len=e}get(e,u){}},l.Uint8ArrayType=class a{constructor(e){this.len=e}get(e,u){return e.subarray(u,u+this.len)}},l.BufferType=class x{constructor(e){this.len=e}get(e,u){return Buffer.from(e.subarray(u,u+this.len))}},l.StringType=class m{constructor(e,u){this.len=e,this.encoding=u}get(e,u){return Buffer.from(e).toString(this.encoding,u,u+this.len)}};class _{constructor(e){this.len=e}static decode(e,u,b){let v="";for(let C=u;C<b;++C)v+=_.codePointToString(_.singleByteDecoder(e[C]));return v}static inRange(e,u,b){return u<=e&&e<=b}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}static singleByteDecoder(e){if(_.inRange(e,0,127))return e;const u=_.windows1252[e-128];if(null===u)throw Error("invaliding encoding");return u}get(e,u=0){return _.decode(e,u,u+this.len)}}l.AnsiStringType=_,_.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},7156:h=>{function l(c,p,f,a,x,m,_){try{var s=c[m](_),e=s.value}catch(u){return void f(u)}s.done?p(e):Promise.resolve(e).then(a,x)}h.exports=function g(c){return function(){var p=this,f=arguments;return new Promise(function(a,x){var m=c.apply(p,f);function _(e){l(m,a,x,_,s,"next",e)}function s(e){l(m,a,x,_,s,"throw",e)}_(void 0)})}},h.exports.__esModule=!0,h.exports.default=h.exports}}]);